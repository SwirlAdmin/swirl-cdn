/**
 * Minified by swirl
 * Original file:/live_stream/live_stream_theme/forthingoman/landscape/live-stream-v8.js
 */
function SLSsetHeight(){let e=window.innerHeight;$(".SLS-main-conatiner").height(e),$(window).width()<768&&($(".SLS-comments-panel").addClass("h-100"),$(".SLS-comments-panel").removeAttr("style"))}function performLargeScreenActions(){setTimeout((()=>{if($(".all-tabs").show(),"2"!==is_defer){$(".SLS-show-comments").click();var e=$(".messages-pin").height();e+=55,$("#myBtn").css("bottom",e+"px")}reverseCommentsOrder()}),5e3)}function performSmallScreenActions(){setTimeout((()=>{reverseCommentsOrder(),isScrollBottom()}),1e3);const e=window.innerHeight-$(".video-box").height()-17;$(".data-box").height(e),$("#livestreambro").on("loadeddata",(function(){var e=$(this).height();const t=window.innerHeight-e-17;$(".data-box").height(t),console.log("Video Height:",t)}))}function reverseCommentsOrder(){$(".SLS-comments-all").html($(".SLS-comments-all").find(".new").get().reverse())}$(document).ready((function(){$("#end_time").val(),$("#is_schedule").val(),$("#is_defer").val();""==$("#product_ids").val()&&($(".showproduct-icon").removeClass("d-inline"),$(".showproduct-icon").hide(),$(".product-tab-title").hide(),$(".product-tab-title").removeClass("current"),$("#tab-2").removeClass("current"),$("#tabs .mobile-tab").addClass("current"),$("#tab-1").addClass("current"),$("#tab-2").hide()),$(window).width()>768?performLargeScreenActions():performSmallScreenActions(),SLSsetHeight()})),$(window).resize((function(){SLSsetHeight()})),$(window).on("orientationchange",(function(){if(90==window.orientation&&$(window).width()<780||-90==window.orientation&&$(window).width()<780){var e=navigator.userAgent||navigator.vendor||window.opera;if(/iPad|iPhone|iPod/.test(e)&&!window.MSStream){jQuery("video")[0].webkitEnterFullscreen()}}else $("#tab-1").removeAttr("style");if(window.matchMedia("(orientation: portrait)").matches){let e=window.innerHeight;console.log("Portrait mode - Window Height: "+e)}setTimeout((function(){if(0===window.orientation||180===window.orientation){const e=window.innerHeight-$(".video-box").height()-17;console.log(e),$(".data-box").height(e)}}),200)}));var hlsUrl=$("#live_stream_url").val();const videoSrc=$("#live_stream_url").val(),player=videojs("livestreambro");player&&videojs.players.livestreambro?videoSrc&&videoSrc.endsWith(".m3u8")?(player.src({type:"application/x-mpegURL",src:videoSrc}),player.ready((function(){console.log("Player is ready!"),setInterval((function(){isNaN(player.currentTime())||isNaN(player.duration())||($(".current-time").text(time_format(player.currentTime())),$(".duration").text(time_format(player.duration())))}),1e3)})),player.on("error",(function(){const e=player.error();let t="An error occurred while trying to play the video.";if(e)switch(e.code){case 2:t="The media is corrupted or cannot be played.";break;case 3:t="The media is unsupported.";break;default:t="An unknown error occurred."}console.log(t),player.load(),player.play().catch((e=>{console.error("Failed to start playback after reload:",e)}))})),player.on("ended",(function(){console.log("Video playback ended.")})),player.on("pause",(function(){console.log("Video paused. Attempting to resume playback."),player.play().catch((e=>{console.error("Failed to resume playback:",e)}))}))):(console.log("Invalid video source. Please provide a valid M3U8 URL."),player.dispose()):alert("Player is not supported or could not be initialized."),$(".play-button").click((function(){player.paused&&(player.play(),$(".play-button").hide())})),firebase.initializeApp({apiKey:"AIzaSyCWTGwzrHuwJY2yrmDcMm3Sm8Qfq1BtOw0",authDomain:"getnatty-1547727043139.firebaseapp.com",projectId:"getnatty-1547727043139",storageBucket:"getnatty-1547727043139.appspot.com"});var db=firebase.firestore(),streamId=$("#stream_id").val();function SWIRLHeartFlaws(){var e=Math.floor(100*Math.random()+1),t=(Math.random()*(1.6-1.2)+1.2).toFixed(1);$('<div class="SWIRLheart part-'+e+" "+["colOne","colTwo","colThree","colFour","colFive","colSix"][Math.floor(6*Math.random())]+'" style="font-size:'+Math.floor(28*Math.random()+22)+'px;"><span></span></div>').appendTo(".SWIRLhearts").css({animation:["flowOne","flowTwo","flowThree"][Math.floor(3*Math.random())]+" "+t+"s linear"}),$(".part-"+e).show(),setTimeout((function(){$(".part-"+e).remove()}),900*t)}$(".SSV-heart-flaws-btn").on("click",(function(){($(".swirl-heart-icon").hide(),$("#swirl-heart-icon-mobile").hide(),$(".fill-heart").show(),SWIRLHeartFlaws(),SWIRLHeartFlaws(),SWIRLHeartFlaws(),null==localStorage.getItem("heart_like"))&&(value=1,db.collection("live_streams").doc(streamId).get().then((e=>{var t=e.data().heart_like;t=null==t?0:t,t+=1,localStorage.setItem("heart_like",t),db.collection("live_streams").doc(streamId).update({heart_like:firebase.firestore.FieldValue.increment(1)})})));db.collection("live_streams").doc(streamId).get().then((e=>{var t=e.data().click_heart_like;t=null==t?0:t,t+=1,db.collection("live_streams").doc(streamId).update({click_heart_like:firebase.firestore.FieldValue.increment(1)})}))})),$(".SLS-products-panel").click((function(){$(".all-tabs").is(":visible")?$(".all-tabs").hide():($(window).width()>600&&$(".SLS-poll-panel").hide(),$(".all-tabs").show(),$(".all-tabs").addClass("h-100"),$("ul.tabs li").removeClass("current"),$(".tab-content").removeClass("current"),$(".product-tab-title").addClass("current"),$("#tab-2").addClass("current"))})),$(".SLS-show-comments").click((function(){$(this).find("img").toggle(),$(".SLS-comments-panel").is(":visible")?($(".SLS-comments-panel").css("transform","translateY(100%)"),setTimeout((()=>{$(".SLS-comments-panel").hide()}),500)):($("#tab-1").show(),$(".SLS-comments-panel").removeClass("h-100"),$(".SLS-comments-panel").show(),setTimeout((()=>{$(".SLS-comments-panel").css("transform","translateY(0%)")}),10),isScrollBottom())})),$(".muteicon").click((function(){$(".tooltiptext").css("visibility","hidden"),$(this).find("img").toggle();var e=document.getElementById("livestreambro_html5_api");e.muted?e.muted=!1:e.muted=!0}));var code="+968";$(".mobile-input").val(code),$(".mobile-input").intlTelInput({autoHideDialCode:!0,autoPlaceholder:"ON",dropdownContainer:document.body,formatOnDisplay:!0,hiddenInput:"full_number",initialCountry:"auto",nationalMode:!0,placeholderNumberType:"MOBILE",preferredCountries:["in"],separateDialCode:!0}),$(".message-submit").click((function(){""!=$("#user_id").val()?($("#demo-modal-1").modal("hide"),insertMessage()):($("#demo-modal-1").modal("show"),$("#demo-modal-1").removeAttr("data-product-id"),$(".close1").css("display","none"))}));streamId=$("#stream_id").val();var is_defer=$("#is_defer").val(),autoverify_popup=$("#autoverify_popup").val();function backtoedit(e,t){$(e).trigger("next.m."+t),$(".resend-link").hide()}function otpcheck(){$(".err_user_cpassword").css("color","red");var e=$("#stream_id").val(),t=document.getElementById("otp").value,a=document.getElementById("otp_confirm").value,o=$("#mobile").intlTelInput("getSelectedCountryData").dialCode;if(t!=a)return $(".err_user_cpassword").html("OTP should be same.").fadeIn().delay(3e3).fadeOut(),$("#otp").focus(),!1;{$("#demo-modal-1").modal("toggle");var s=document.getElementById("name").value,i=document.getElementById("mobile").value,n=(new Date).getTime();let t=generateString(20);console.log(t),db.collection("messages").doc(e).collection("users").doc(t).set({user_id:t,country_code:o,name:s,phone:i,created_date:n,stream_id:e}),$("#user_id").val(t),$("#user_fname").val(s),$("#user_phone").val(i);try{localStorage.setItem("user_id",t),localStorage.setItem("user_fname",s),localStorage.setItem("user_phone",i)}catch(e){}insertMessage(),$(".rsvp-button").hide()}}function otpcheck_without_sp(e){if(0==e){if(""==(a=document.getElementById("name").value))return $(".error_msg").html("This is a required field.").fadeIn().delay(3e3).fadeOut(),$("#name").focus(),!1;if(a.length<3)return $(".error_msg").html("Please enter 3 latter.").fadeIn().delay(3e3).fadeOut(),$("#name").focus(),!1;{if(0==onlyAlphabets(a))return $(".error_msg").html("Name should be alphabets only").fadeIn().delay(3e3).fadeOut(),$("#name").focus(),!1;$("#demo-modal-1").modal("toggle");var t=$("#stream_id").val(),a=document.getElementById("name").value,o=(new Date).getTime();let s=generateString(20);db.collection("messages").doc(t).collection("users").doc(s).set({user_id:s,name:a,created_date:o,stream_id:t}),$("#user_id").val(s),$("#user_fname").val(a);try{localStorage.setItem("user_id",s),localStorage.setItem("user_fname",a)}catch(e){}insertMessage()}}else{a=document.getElementById("name").value;var s=document.getElementById("mobile").value,i=document.getElementById("re-email").value,n=document.getElementById("re-location").value;if(""==a)return $(".error_msg").html("This is a required field.").fadeIn().delay(3e3).fadeOut(),$("#name").focus(),!1;if(a.length<3)return $(".error_msg").html("Please enter 3 latter.").fadeIn().delay(3e3).fadeOut(),$("#name").focus(),!1;if(""==i)return $(".error_msg").html("This is a required fields.").fadeIn().delay(3e3).fadeOut(),$("#re-email").focus(),!1;if(!/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/.test(i))return $(".error_msg").html("Please enter a valid email address.").fadeIn().delay(3e3).fadeOut(),$("#re-email").focus(),!1;if(""==s)return $(".error_msg").html("This is a required field.").fadeIn().delay(3e3).fadeOut(),$("#mobile").focus(),!1;if(s.length<8||s.length>11)return $(".error_msg").html("Please enter a valid mobile number between 8 and 11 digits.").fadeIn().delay(3e3).fadeOut(),$("#mobile").focus(),!1;if(""==n)return $(".error_msg").html("Please select a location.").fadeIn().delay(3e3).fadeOut(),$("#re-location").focus(),!1;{if(0==onlyAlphabets(a))return $(".error_msg").html("Name should be alphabets only").fadeIn().delay(3e3).fadeOut(),$("#name").focus(),!1;var l=$("#mobile").intlTelInput("getSelectedCountryData").dialCode;$("#demo-modal-1").modal("toggle");a=document.getElementById("name").value;var r=document.getElementById("mobile").value;if(""==r)s="";else s=r;t=$("#stream_id").val(),o=(new Date).getTime();let d=generateString(20);l=null!=l?l:"",db.collection("messages").doc(t).collection("users").doc(d).set({user_id:d,country_code:l,name:a,phone:s,created_date:o,stream_id:t,email:i,location:n}),$("#user_id").val(d),$("#user_fname").val(a),$("#user_phone").val(s),$("#country_code").val(l),$("#user_email").val(i),$("#user_location").val(n),$("#country_code").val(l);try{localStorage.setItem("user_id",d),localStorage.setItem("user_fname",a),localStorage.setItem("user_phone",s),localStorage.setItem("country_code",l),localStorage.setItem("user_email",i),localStorage.setItem("user_location",n)}catch(e){}if(insertMessage(),$("#demo-modal-1").attr("data-product-id"))customBuynowpopup($("#demo-modal-1").attr("data-product-id"))}}}function customBuynowpopup(e){var t=$("[data-proid="+e+"]").data();console.log(t);var a=$("[data-proid="+e+"]").attr("data-proid"),o=$("[data-proid="+e+"]").attr("data-desid"),s=$("[data-proid="+e+"]").attr("data-protitle"),i=$("[data-proid="+e+"]").attr("data-proimg"),n=$("[data-proid="+e+"]").attr("data-redirection"),l=$("#brand_logo").val(),r=$("#brand_name").val(),d=$("#user_id").val(),c=$("#user_fname").val(),u=$("#user_phone").val(),m=$("#user_email").val(),p=$("#user_location").val(),h=$("#country_code").val(),f=(new Date).getTime();let v=generateString(20);Swal.fire({position:"bottom",title:"Book a test drive?",text:"Do you wish to book a test drive of "+s+" ?",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirm",cancelButtonText:"Cancel"}).then((e=>{e.isConfirmed&&(db.collection("messages").doc(streamId).collection("buy_now").doc(v).set({user_id:d,country_code:h,name:c,phone:u,created_date:f,stream_id:streamId,product_id:a,product_title:s,product_image:i,product_url:n,designer_id:o,user_email:m,user_location:p}),Swal.fire({position:"bottom",title:"Submitted!",text:"Thanks for your test drive request! A "+r+" representative will reach out to you soon.",confirmButtonText:"Close",imageUrl:l,imageWidth:80,imageHeight:80,imageAlt:"logo"}))}))}function insertMessage(){if(""==$(".message-input").val())return $(".message-input").focus(),!1;sendMessage()}function sendMessage(e){var t=$("#user_id").val(),a=$("#user_fname").val(),o=$("#user_phone").val(),s=(new Date).getTime(),i=document.getElementById("SLS-comment").value;db.collection("messages").doc(streamId).collection("messages").add({cover_img:"",created_time:s,from:t,is_designer:!1,is_designer_seen:!1,message:i,name:a,profile:"",title:"",type:"text",user_percentage:"20",user_phone:o,flag:"1"}),$(".message-input").val(null),$(".message-input-mobile").val(null),$(".collapsable").css("display","none"),$(window).width()<768&&$(".action-bar").css("display","table-cell"),$(".message-textbox-div").css("width","50%"),$(".message-textbox-div").css("padding-right","0px")}function rsvp_submit(){var e=$("#stream_id").val();let t=generateString(20);var a=document.getElementById("rsvp-name").value,o=document.getElementById("rsvp-email").value,s=document.getElementById("rsvp-phone").value,i=document.getElementById("rsvp-location").value,n=document.forms["rsvp-form"].agree,l=(new Date).getTime();if(""==a)return $(".form-validation-error").html("This is a required fields.").fadeIn().delay(3e3).fadeOut(),$("#rsvp-name").focus(),!1;if(a.length<3)return $(".form-validation-error").html("Please enter 3 latter.").fadeIn().delay(3e3).fadeOut(),$("#rsvp-name").focus(),!1;if(""==o)return $(".form-validation-error").html("This is a required fields.").fadeIn().delay(3e3).fadeOut(),$("#rsvp-email").focus(),!1;if(!/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/.test(o))return $(".form-validation-error").html("Please enter a valid email address.").fadeIn().delay(3e3).fadeOut(),$("#rsvp-email").focus(),!1;if(""==s)return $(".form-validation-error").html("This is a required fields.").fadeIn().delay(3e3).fadeOut(),$("#rsvp-phone").focus(),!1;if(s.length<8||s.length>11)return $(".form-validation-error").html("Please enter a valid mobile number between 8 and 11 digits.").fadeIn().delay(3e3).fadeOut(),$("#rsvp-phone").focus(),!1;if(""==i)return $(".form-validation-error").html("Please select a location.").fadeIn().delay(3e3).fadeOut(),$("#rsvp-location").focus(),!1;if(!n.checked)return $(".error_msg_rsvp").html("You must agree with the terms and conditions").fadeIn().delay(3e3).fadeOut(),$("#checkbox").focus(),!1;$("#user_id").val(t),$("#user_fname").val(a),$("#user_phone").val(s),$("#user_email").val(o),$("#user_location").val(i);try{localStorage.setItem("user_id",t),localStorage.setItem("user_fname",a),localStorage.setItem("user_email",o),localStorage.setItem("user_phone",s),localStorage.setItem("user_email",o),localStorage.setItem("user_location",i),localStorage.setItem("is_rsvp",1)}catch(e){}db.collection("messages").doc(e).collection("users").doc(t).set({user_id:t,name:a,email:o,phone:s,created_date:l,stream_id:e,location:i,is_rsvp:1}),$(".error_msg_rsvp").css("color","#11ff11").html("RSVP form submitted successfully").fadeIn().delay(3e3).fadeOut().promise().done((function(){$("#exampleModal").modal("hide"),$(".modal-backdrop").remove(),$(".rsvp-button").hide()}))}if(db.collection("live_streams").doc(streamId).onSnapshot({includeMetadataChanges:!0},(e=>{if(1==e.exists){var t="";""==e.data().is_recorded&&"undefined"==e.data().is_recorded||(t=e.data().is_recorded),1==t?($("#livestatus").text("RECORDED"),$("#livestatus").addClass("recordingflag")):($("#livestatus").text("LIVE"),$("#livestatus").addClass("liveflag"),1==autoverify_popup&&$(".rsvp-button").click())}else 2==is_defer&&($("#livestatus").text("UPCOMING"),$("#livestatus").addClass("upcoming-flag"),$("#viewcount").hide())})),$("#mobile").on("keydown",(function(e){13==e.which&&sendEvent("#demo-modal-1",2)})),$("#otp").on("keydown",(function(e){13==e.which&&otpcheck()})),sendEvent=function(e,t){$(".err_user_cpassword").css("color","red");var a=$("#base_url").val(),o=document.getElementById("name").value,s=document.getElementById("mobile").value,i=$("#mobile").intlTelInput("getSelectedCountryData").dialCode;if(""==o)return $(".err_user_cpassword").html("This is a required field.").fadeIn().delay(3e3).fadeOut(),$("#name").focus(),!1;if(o.length<3)return $(".err_user_cpassword").html("Please enter 3 latter.").fadeIn().delay(3e3).fadeOut(),$("#name").focus(),!1;if(""==s)return $(".err_user_cpassword").html("This is a required field.").fadeIn().delay(3e3).fadeOut(),$("#mobile").focus(),!1;if(s.length<10||s.length>10)return $(".err_user_cpassword").html("Please Enter 10 Digit Mobile No.").fadeIn().delay(3e3).fadeOut(),$("#mobile").focus(),!1;if(0==onlyAlphabets(o))return $(".err_user_cpassword").html("Name should be alphabets only").fadeIn().delay(3e3).fadeOut(),$("#name").focus(),!1;$(".close1").css("display","block");s=$("#mobile").val();var n=Math.floor(1e3+9e3*Math.random());$("#otp_confirm").val(n),$.ajax({type:"POST",dataType:"json",url:a+"index.php/Live/send_otp",data:"mobile="+encodeURIComponent(s)+"&otp="+encodeURIComponent(n)+"&code="+encodeURIComponent(i),success:function(e){}}),$(e).trigger("next.m."+t),$(".resend-link").show()},resendotp=function(e,t){$(".err_user_cpassword").css("color","red");var a=$("#base_url").val(),o=document.getElementById("name").value,s=document.getElementById("mobile").value,i=$("#mobile").intlTelInput("getSelectedCountryData").dialCode;if(""==o)return $(".err_user_cpassword").html("This is a required field.").fadeIn().delay(3e3).fadeOut(),$("#name").focus(),!1;if(o.length<3)return $(".err_user_cpassword").html("Please enter 3 latter.").fadeIn().delay(3e3).fadeOut(),$("#name").focus(),!1;if(""==s)return $(".err_user_cpassword").html("This is a required field.").fadeIn().delay(3e3).fadeOut(),$("#mobile").focus(),!1;if(s.length<10||s.length>10)return $(".err_user_cpassword").html("Please Enter 10 Digit Mobile No.").fadeIn().delay(3e3).fadeOut(),$("#mobile").focus(),!1;if(0==onlyAlphabets(o))return $(".err_user_cpassword").html("Name should be alphabets only").fadeIn().delay(3e3).fadeOut(),$("#name").focus(),!1;$(".close1").css("display","block");s=$("#mobile").val();var n=Math.floor(1e3+9e3*Math.random());$("#otp_confirm").val(n),$(".err_user_cpassword").css("color","#20B641"),$(".err_user_cpassword").html("Resend otp successfully.").fadeIn().delay(3e3).fadeOut(),$.ajax({type:"POST",dataType:"json",url:a+"index.php/Live/send_otp",data:"mobile="+encodeURIComponent(s)+"&otp="+encodeURIComponent(n)+"&code="+encodeURIComponent(i),success:function(e){}}),$(e).trigger("next.m."+t),$(".resend-link").show()},$("#close-popup-btn").click((function(){$(".modal-backdrop").remove()})),$("#close-popup-btn-1").click((function(){$(".modal-backdrop").remove()})),$(".askque-popup-icon").click((function(){$("#askque-popup").modal("toggle")})),"0000-00-00 00:00:00"!=(end_time=$("#end_time").val()))try{localStorage.removeItem("user_id"),localStorage.removeItem("user_fname"),localStorage.removeItem("user_phone"),localStorage.removeItem("user_email"),localStorage.removeItem("user_location")}catch(e){}try{null!=localStorage.getItem("user_id")&&(res=localStorage.getItem("user_id"),$("#user_id").val(res)),null!=localStorage.getItem("user_fname")&&(res1=localStorage.getItem("user_fname"),$("#user_fname").val(res1)),null!=localStorage.getItem("user_phone")&&(res2=localStorage.getItem("user_phone"),$("#user_phone").val(res2)),null!=localStorage.getItem("user_email")&&(res3=localStorage.getItem("user_email"),$("#user_email").val(res3)),null!=localStorage.getItem("user_email")&&(res3=localStorage.getItem("user_email"),$("#user_email_local").val(res3)),null!=localStorage.getItem("user_location")&&(res3=localStorage.getItem("user_location"),$("#user_location").val(res3)),null!=localStorage.getItem("country_code")&&(res4=localStorage.getItem("country_code"),$("#country_code").val(res4))}catch(e){}var user_id=$("#user_id").val();function openFullscreen(){document.getElementById("parent");var e=navigator.userAgent||navigator.vendor||window.opera;if(/android/i.test(e)&&(document.body.requestFullscreen(),screen.orientation.lock("landscape")),/iPad|iPhone|iPod/.test(e)&&!window.MSStream){jQuery("video")[0].webkitEnterFullscreen()}}function closeFullscreen(){screen.orientation.lock("portrait")}function closeFullscreen(){document.exitFullscreen()}""!=user_id?$(".rsvp-button").hide():$(".rsvp-button").show(),$(window).on("keydown",(function(e){if(13==e.which)return""!=$("#user_id").val()?($("#demo-modal-1").modal("hide"),insertMessage()):($("#demo-modal-1").modal("show"),$("#demo-modal-1").removeAttr("data-product-id"),$(".close1").css("display","none")),!1})),$(document).ready((function(){$("ul.tabs li").click((function(){var e=$(this).attr("data-tab");"tab-1"==e||"tab-5"==e?($(".all-tabs").removeClass("h-100"),$(window).width()<768&&$(".SLS-comments-panel").addClass("h-100"),"tab-5"==e&&($("#tab-1").removeAttr("style"),$(".SLS-poll-panel").css("display","block")),pinheight()):$(".all-tabs").addClass("h-100"),$("ul.tabs li").removeClass("current"),$(".tab-content").removeClass("current"),$(this).addClass("current"),$("#"+e).addClass("current")}))}));streamId=$("#stream_id").val();var comments_limit=$("#comments_limit").val();db.collection("messages").doc(streamId).collection("messages").orderBy("created_time","desc").limit(comments_limit).onSnapshot((e=>{if(size=e.size,e.docChanges().forEach((e=>{if("removed"===e.type)$("#message-"+e.doc.id).remove();else{var t=$("#designer_id").val(),a=(t=$("#designer_id").val(),convertMsToTime(e.doc.data().created_time));if(e.doc.data().from==t)var o="fillcolor",s="brand-time",i=' <img src="'+$("#brand_logo").val()+'" alt="Brand logo" title="'+e.doc.data().name+'" />';else o="user-comments",s="",i='<i class="fas fa-user-circle" style="font-size:30px"></i>';if(1==isValidUrl(e.doc.data().message)){var n=urlify(e.doc.data().message);$('<div id="message-'+e.doc.id+'" class="new"><div class="'+o+' msgcontent-div"><div class="icon">'+i+'</div><div class="msg-content"><p>'+e.doc.data().name+' <span class="time '+s+'">'+a+"</span></p><p>"+n+"</p></div></div></div>").appendTo($(".SLS-comments-all")).addClass("new")}else $('<div id="message-'+e.doc.id+'" class="new"><div class="'+o+' msgcontent-div"><div class="icon">'+i+'</div><div class="msg-content"><p>'+e.doc.data().name+' <span class="time '+s+'">'+a+"</span></p><p>"+e.doc.data().message+"</p></div></div></div>").appendTo($(".SLS-comments-all")).addClass("new")}})),"none"==$("#myBtn").css("display"))topFunction();else{var t=$(".SLS-comments-all")[0];t.scrollHeight>t.clientHeight?$("#myBtn").css("display","block"):$("#myBtn").css("display","none")}}));let mybutton=document.getElementById("myBtn");function topFunction(){$(".SLS-comments-all").animate({scrollTop:$(".SLS-comments-all").get(0).scrollHeight},400)}function isScrollBottom(){var e=$(".SLS-comments-all");return e.scrollTop()+e.innerHeight()>=e[0].scrollHeight-20}function pinheight(){setTimeout((()=>{var e=$(".messages-pin").height();e="calc(100% - "+(e=110+e)+"px)",$(".SLS-comments-all").css("height",e);var t=$(".messages-pin").height();t+=75,$("#myBtn").css("bottom",t+"px")}),100)}function convertMsToTime(e){var t=new Date(e);timezone=t.toString();var a=new Date(timezone);return localtime=a.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}),localtime}$(".SLS-comments-all").scroll((function(){isScrollBottom()?$("#myBtn").css("display","none"):$("#myBtn").css("display","block")})),db.collection("live_streams").doc(streamId).onSnapshot((e=>{if(e.exists){var t=e.data().pin_comment_id;if(""!=t&&null!=t)db.collection("messages").doc(streamId).collection("messages").doc(t).get().then((e=>{if(e.exists){$(".messages-pin").empty(),$(".messages-pin-mobile").empty();var t=' <img src="'+$("#brand_logo").val()+'" alt="Brand logo" title="'+e.data().name+'" />';if(1==isValidUrl(e.data().message)){var a=urlify(e.data().message);if($('<div id="message-'+e.id+'" class="new"><div class="pin-main-div"><div class="icon pin-user-pic">'+t+'</div><div class="msg-content pin-msg-content"><p>'+e.data().name+"</p><p>"+a+'</p></div><div class="pin-main-icon"><span class="pinicon"><i class="icon-pushpin"></i></span></div></div>').appendTo($(".messages-pin")).addClass("new"),$(window).width()<768){s="calc(100% - "+(s=110+(s=$(".messages-pin").height()))+"px)",$(".SLS-comments-all").css("height",s);var o=$(".messages-pin").height();o+=75,$("#myBtn").css("bottom",o+"px")}else{o=$(".messages-pin").height();o+=55,$("#myBtn").css("bottom",o+"px")}}else if($('<div id="message-'+e.id+'" class="new"><div class="pin-main-div"><div class="icon pin-user-pic">'+t+'</div><div class="msg-content pin-msg-content"><p>'+e.data().name+" </p><p>"+e.data().message+'</p></div><div class="pin-main-icon"><span class="pinicon"><i class="icon-pushpin"></i></span></div></div></div>').appendTo($(".messages-pin")).addClass("new"),$(window).width()<768){s="calc(100% - "+(s=110+(s=$(".messages-pin").height()))+"px)",$(".SLS-comments-all").css("height",s);o=$(".messages-pin").height();o+=75,$("#myBtn").css("bottom",o+"px")}else{o=$(".messages-pin").height();o+=55,$("#myBtn").css("bottom",o+"px")}}else if($(".messages-pin").empty(),$(".messages-pin-mobile").empty(),$(window).width()<768){var s;s="calc(100% - "+(s=100)+"px)",$(".SLS-comments-all").css("height",s);o=72;$("#myBtn").css("bottom",o+"px")}else o=55,$("#myBtn").css("bottom",o+"px")}));else if($(".messages-pin").empty(),$(window).width()<768){var a=100;a="calc(100% - "+a+"px)",$(".SLS-comments-all").css("height",a);var o=72;$("#myBtn").css("bottom",o+"px")}else o=55,$("#myBtn").css("bottom",o+"px")}}));const isValidUrl=e=>null!==e.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g);function urlify(e){if(-1!==e.indexOf("https")){return e.replace(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g,(function(e){return/^((http|https|ftp):\/\/)/.test(e)||(e="https://"+e),'<a style="word-break:break-all" href="'+e+'" target="_blank">'+e+"</a>"}))}return e}$("body").on("click",".SLS-product-buynow-btn",(function(){var e=$(this).attr("data-proid"),t=$(this).attr("data-desid"),a=$(this).attr("data-protitle"),o=$(this).attr("data-proimg"),s=$(this).attr("data-redirection"),i=$("#brand_logo").val(),n=$("#brand_name").val(),l=$("#user_id").val(),r=$("#user_fname").val(),d=$("#user_phone").val(),c=$("#user_email").val(),u=$("#user_location").val(),m=$("#country_code").val(),p=(new Date).getTime();let h=generateString(20);""==l?($("#demo-modal-1").attr("data-product-id",e).modal("show"),$(".close1").css("display","none")):Swal.fire({position:"bottom",title:"Book a test drive?",text:"Do you wish to book a test drive of "+a+" ?",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirm",cancelButtonText:"Cancel"}).then((f=>{f.isConfirmed&&(db.collection("messages").doc(streamId).collection("buy_now").doc(h).set({user_id:l,country_code:m,name:r,phone:d,created_date:p,stream_id:streamId,product_id:e,product_title:a,product_image:o,product_url:s,designer_id:t,user_email:c,user_location:u}),Swal.fire({position:"bottom",title:"Submitted!",text:"Thanks for your test drive request! A "+n+" representative will reach out to you soon.",confirmButtonText:"Close",imageUrl:i,imageWidth:80,imageHeight:80,imageAlt:"logo"}))}))}));const characters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function generateString(e){let t="";const a=characters.length;for(let o=0;o<e;o++)t+=characters.charAt(Math.floor(Math.random()*a));return t}var fbButton=document.getElementById("fb-share-button"),url=$("#copy-text").val();function copy_text(){var e=document.getElementById("copy-text");e.select(),e.setSelectionRange(0,99999),navigator.clipboard.writeText(e.value),$('[data-toggle="tooltip"]').tooltip(),$("#btn-copy").html("Copied")}function onlyAlphabets(e){return!!/^[a-zA-Z ]*$/.test(e)}function reloadOnceLive(){db.collection("live_streams").doc(streamId).onSnapshot((e=>{2==$("#is_defer").val()?($("#black-screen").hide(),$("#remote-media").show(),$(".muteicon").show(),$(".share-div").show(),$(".live-status").show(),$(".SL-schedule-timer").show()):($("#remote-media").hide(),$("#black-screen").show(),$(".live-status").hide()),$(".product-img-list").hide();e.exists&&db.collection("live_streams").doc(streamId).onSnapshot({includeMetadataChanges:!0},(e=>{1==e.data().mux_status&&(window.location=window.location.href)}))}))}fbButton.addEventListener("click",(function(){return window.open("https://www.facebook.com/sharer/sharer.php?u="+url,"facebook-share-dialog","width=800,height=600"),!1})),$(document).ready((function(){db.collection("live_streams").doc(streamId).onSnapshot((e=>{e.exists||reloadOnceLive()}))}));var interval,end_time=$("#end_time").val();is_defer=$("#is_defer").val();function doFirst(){barSize=$("#defaultBar").width(),$("#defaultBar").css("width",barSize),myVideo=document.getElementById("livestreambro_html5_api"),playButton=document.getElementById("playButton"),icon=document.getElementById("play-pause-icon"),defaultBar=document.getElementById("defaultBar"),progressBar=document.getElementById("progressBar"),playButton.addEventListener("click",playOrPause,!1),defaultBar.addEventListener("click",clickedBar,!1),$(".current-time").text(time_format(0)),$(".duration").text(time_format(player.duration)),updateBar=setInterval(update,500)}function playOrPause(){myVideo.paused||myVideo.ended?(myVideo.play(),icon.className="fa fa-pause",updateBar=setInterval(update,500)):(myVideo.pause(),icon.className="fa fa-play",window.clearInterval(updateBar))}function clickedBar(e){if(!myVideo.paused&&!myVideo.ended){barSize=$("#defaultBar").width(),$("#defaultBar").css("width",barSize);var t=e.pageX-$("#defaultBar").offset().left,a=t*myVideo.duration/barSize;myVideo.currentTime=a,progressBar.style.width=t+"px"}}function update(){if(myVideo.ended)progressBar.style.width="0px",icon.className="fa fa-pause",window.clearInterval(updateBar);else{barSize=$("#defaultBar").width(),$("#defaultBar").css("width",barSize);var e=parseInt(myVideo.currentTime*barSize/myVideo.duration);progressBar.style.width=e+"px"}}function time_format(e){var t=Math.floor(e/60)<10?"0"+Math.floor(e/60):Math.floor(e/60);return t+":"+(Math.floor(e-60*t)<10?"0"+Math.floor(e-60*t):Math.floor(e-60*t))}function nFormatter(e){return e>=1e9?(e/1e9).toFixed(1).replace(/\.0$/,"")+"G":e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e5?(e/1e5).toFixed(1).replace(/\.0$/,"")+"L":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e}if($("#black-screen").hide(),db.collection("live_streams").doc(streamId).onSnapshot((e=>{if(e.exists)$("#black-screen").hide(),$(".flag").show(),$("#remote-media").show(),1==e.data().is_paused&&($("#remote-media").hide(),$("#black-screen").show(),$("#stream_span").html("paused & will resume shortly"));else if("0000-00-00 00:00:00"==end_time){if($(".poll-tab").css("visibility","hidden"),$("#black-screen").show(),2!=is_defer){$(".flag").hide(),$(".top-bar .text-left").hide(),$(".top-bar .muteicon").removeClass("d-inline").hide(),$(".top-bar .share-icon").removeClass("d-inline").hide(),$(".close-icon svg path").css("fill","#fff");var t=window.innerHeight-$("#black-screen").height()-17;$(".data-box").height(t),$(window).width()>768&&($("#tab-1").addClass("banner-tab-hide"),$(".SLS-product-tile").css("border","1px solid #0000004D"),$(".offer-style p").css("border","1px solid #0000004D")),$(".swirl-heart-shaped").hide(),$(".fullscreen-icon").hide(),$(".action-bar").hide(),$("#swirl-heart-icon").hide(),$(".fill-heart").hide()}else{$(".swirl-heart-icon").hide(),$(".SSV-heart-flaws-btn svg").hide(),$(".askque-popup-icon svg").hide(),$(".SLS-show-comments .comment-off").hide(),$(".SLS-show-comments .comment-on").hide(),$(".SLS-show-comments").css("display","none !important"),$(".askque-popup-icon").css("display","none !important"),$(".SLS-show-comments").removeClass("pr-2"),$(".askque-popup-icon").removeClass("pr-2"),$(".showproduct-icon").removeClass("pr-2"),$(".close-icon svg path").css("fill","#fff");t=window.innerHeight-$("#black-screen").height();t+=70,$(".data-box").height(t)}$("#remote-media").hide(),$("#swirl-heart-icon").hide(),$(".fill-heart").hide()}else $("#remote-media").show(),$("#black-screen").hide()})),window.addEventListener("load",doFirst,!1),db.collection("live_streams").doc(streamId).onSnapshot((e=>{e.exists?db.collection("live_streams").doc(streamId).onSnapshot({includeMetadataChanges:!0},(e=>{1==e.data().comments_status?$("#Search").show():$("#Search").hide(),1==e.data().fire_status?$("#gif").show():$("#gif").hide();var t=e.data().ivs_viewer_count;null!=t||null!=t?(result=nFormatter(t),$("#view-count").text(result)):$("#view-count").text(0)})):($(".SLS-comment-form").hide(),$(".message-textbox-div").css("display","none !important"),$("#gif").hide())})),2==(is_defer=$("#is_defer").val())){var id="undefined",starting_time=$("#starting_time").val(),countDownDate=[],x=[],now=[],distance=[],days=[],hours=[],minutes=[],seconds=[];countDownDate[id]=new Date(starting_time.replaceAll("-","/")).getTime(),x[id]=setInterval((function(){now[id]=(new Date).getTime(),distance[id]=countDownDate[id]-now[id],days[id]=Math.floor(distance[id]/864e5),hours[id]=Math.floor(distance[id]%864e5/36e5),minutes[id]=Math.floor(distance[id]%36e5/6e4),seconds[id]=Math.floor(distance[id]%6e4/1e3),document.getElementById(`${id}day`).innerHTML=String(days[id]).padStart(2,"0"),document.getElementById(`${id}hour`).innerHTML=String(hours[id]).padStart(2,"0"),document.getElementById(`${id}min`).innerHTML=String(minutes[id]).padStart(2,"0"),document.getElementById(`${id}sec`).innerHTML=String(seconds[id]).padStart(2,"0"),distance[id]<0&&(clearInterval(x[id]),$(".SL-schedule-timer").hide(),document.getElementById(`${id}day`).innerHTML="00",document.getElementById(`${id}hour`).innerHTML="00",document.getElementById(`${id}min`).innerHTML="00",document.getElementById(`${id}sec`).innerHTML="00")}),1e3)}function listenToOffer(e){db.collection("features").doc(e).collection("Offer").onSnapshot((function(e){if(e.empty)console.log("The Offer collection does not exist or is empty."),$('li.tab-link[data-tab="tab-4"]').hide(),$('li.tab-link.product-tab-title.current[data-tab="tab-2"]').addClass("only");else{let t=!1;e.forEach((function(e){(console.log(e.exists),e.exists)&&(""!=e.data().content&&($('li.tab-link[data-tab="tab-4"]').show(),""==$("#product_ids").val()&&$('li.tab-link[data-tab="tab-4"]').addClass("onlyoffer"),$(".offer-content").html(e.data().content),t=!0))})),t&&$(window).width()>768&&($(".tab-link.current").removeClass("current"),$('li.tab-link[data-tab="tab-4"]').css("display","block").addClass("current"),$("#tab-4").addClass("current"),$("#tab-2").removeClass("current"))}}))}function listenToVirtualGift(e){db.collection("messages").doc(e).onSnapshot((e=>{if(console.log(e),e.exists){const t=e.data().virtual_gift;if(console.log(t),t){const e=`\n          <div class="virtual-gift">\n            <img src="https://cdn.jsdelivr.net/gh/SwirlAdmin/swirl-cdn/assets/images/svg/vivo/virtual-gift.svg" alt="gift">\n            <span>${t}</span>\n          </div>\n        `;$("#gift-container").html(e)}else $("#gift-container").empty()}else console.log("No such document!"),$("#gift-container").empty()}),(e=>{console.log("Error getting document:",e),$("#gift-container").empty()}))}function fetchAndUpdateRemainingCoupon(e,t){var a=t+"_remainingCoupon";console.log(a),db.collection("features").doc(e).get().then((function(e){if(e.exists){console.log(e.data());var t=e.data()[a]||0;return console.log(t),t}console.log("No such document!")})).then((function(){console.log("Document successfully updated!")})).catch((function(e){console.error("Error updating document: ",e)}))}function listenToFlashOffer(e){db.collection("features").doc(e).onSnapshot((t=>{if(t.exists){console.log("active "+t.data());var a=String(t.data().ActiveCouponId);if(""!=a&&null!=a){if(localStorage.getItem("couponId")!=a){console.log(localStorage.getItem("couponId"));var o=db.collection("features").doc(e).collection("Coupon").doc(a);console.log(o),o.get().then((e=>{if(e.exists){$("#flashoffer-container").empty();var t=e.data();if(t.remainingCoupons>0){console.log(t);var a=`\n                                <div id="flashoffer-container-inner" class="${e.id}">\n                                  <div class="leftcoupon-div" >\n                                    <p><img src="https://cdn.jsdelivr.net/gh/SwirlAdmin/swirl-cdn/assets/images/svg/vivo/flashvector.svg" alt="flashvector"><span class="remainingCoupons">${t.remainingCoupons}</span> coupons left</p>\n                                    <div class="timer flash-timer" id="timer-${e.id}">00 : ${t.remainingDuration}</div>\n                                  </div>\n                                  <div class="flash-div">\n                                    <div class="left">\n                                        <div class="icon">\n                                            <img src="https://cdn.jsdelivr.net/gh/SwirlAdmin/swirl-cdn/assets/images/svg/vivo/flashlight-fill.svg" alt="flashlight">\n                                        </div>\n                                        <div class="text">\n                                            <p><strong>${t.title}</strong></p>\n                                            <p>${t.subtitle}</p>\n                                        </div>\n                                    </div>\n                                    <div class="code-btn" data-code="${t.code}" data-couponId="${e.id}">Copy code</div>\n                                    <p id="textToCopy" style="display: none;">${t.code}</p>\n                                  </div>\n                                </div>\n                          `;$("#flashoffer-container").append(a),startTimerFlashOffer(e.id,t.remainingDuration)}else $("#flashoffer-container").empty()}else console.log("No such document!")})).catch((e=>{console.log("Error getting document:",e)}))}}else $("#flashoffer-container").empty()}}))}function startTimerFlashOffer(e,t){interval&&clearInterval(interval);var a=t;interval=setInterval((function(){a<=0?(clearInterval(interval),$("#flashoffer-container").empty()):(a--,$("#timer-"+e).text("00:"+a))}),1e3)}function switchbtn(e){var t=$("#database").val(),a=$("#options_bc").val(),o=$("#base_url").val(),s=$("#user_id").val(),i=$("#user_fname").val(),n=$("#user_phone").val(),l=$("#poll-question-number").val(),r=$("#poll-question-title").val(),d=$("#stream_id").val();if(""==s)$('input[name="question1"]').prop("checked",!1),$("#demo-modal-1").modal("show"),$(".close1").css("display","none");else{$("#demo-modal-1").modal("hide");var c=$("#answer-text-"+e).text();$.ajax({type:"POST",dataType:"json",url:o+"index.php/Live/question_answer",data:"user_id="+encodeURIComponent(s)+"&user_fname="+encodeURIComponent(i)+"&user_phone="+encodeURIComponent(n)+"&question="+encodeURIComponent(l)+"&answer="+encodeURIComponent(c)+"&question_title="+encodeURIComponent(r)+"&stream_id="+encodeURIComponent(d)+"&database="+encodeURIComponent(t),success:function(e){console.log(e),$("input:radio[name=question1]").attr("disabled",!0),$(".total-votes-div").show(),$(".total-votes-div").addClass("d-inline"),$(".feedback").show();var t=e.data.percentage;$("#totalVotes").text(e.data.total_votes),$.each(t,(function(e,t){e+=1;var o=t+"%";$(".highlight-answer"+e).css("width","0%"),$(".highlight-answer"+e).animate({width:o},1e3),$(".highlight-answer"+e).css("background-color",a),$(".feedback-answer"+e).text(o),localStorage.setItem("poll_question_answer",l),0==t&&$("#answer-text-"+e).addClass("options-text-add")}))}})}}function sendTimeSL(){vdo=document.getElementById("livestreambro"),parent.postMessage({action:"updateStreamTime",data:Math.floor("0000-00-00 00:00:00"!=end_time?vdo.currentTime:0)},"*")}function sendRefreshSL(){parent.postMessage({action:"refreshStreamPage",data:!0},"*")}db.collection("live_streams").doc(streamId).onSnapshot({includeMetadataChanges:!0},(e=>{1==e.exists&&(null!=e.data().click_heart_like&&(SWIRLHeartFlaws(),SWIRLHeartFlaws(),SWIRLHeartFlaws()))})),$("body").on("click",".code-btn",(function(){var e=$("#user_id").val();const t=$(this).attr("data-couponId");var a=localStorage.getItem("couponId");const o=$(this).attr("data-code");if(a!=t)if(""!=e){const e=document.getElementById("textToCopy").innerText;navigator.clipboard.writeText(e).then((()=>{$(this).text("Copied")})).catch((e=>{console.error("Failed to copy: ",e),alert("Failed to copy text to clipboard")}));const a={couponId:t,code:o,user_id:$("#user_id").val(),user_fname:$("#user_fname").val(),user_phone:$("#user_phone").val(),createdDate:new Date},s=db.collection("features").doc().id;db.collection("features").doc(streamId).collection("Userdata").doc(s).set(a).then((()=>{var e=db.collection("features").doc(streamId).collection("Coupon").doc(t);e.update({remainingCoupons:firebase.firestore.FieldValue.increment(-1)}).then((()=>e.get())).then((e=>{if(e.exists){const a=e.data();$(`.${t} .remainingCoupons`).text(a.remainingCoupons),0==a.remainingCoupons&&db.collection("features").doc(streamId).update({ActiveCouponId:""})}})),localStorage.setItem("couponId",t)})).catch((e=>{console.error("Error adding coupon: ",e)}))}else $("#demo-modal-1").modal("show"),$(".close1").css("display","none");else alert("Already copy coupon code.")})),$(document).ready((function(){var e,t=$("#end_time").val();if(listenToOffer(streamId),"0000-00-00 00:00:00"==t){listenToVirtualGift(streamId),listenToFlashOffer(streamId);var a=$("#database").val();db.collection("live_streams").doc(streamId).get().then((t=>{if(t.exists){var o=$("#base_url").val();db.collection("polls_questions_stream").doc(streamId).onSnapshot((t=>{if(t.exists){var i=t.data().poll_question_id;if(console.log(i),""!=i&&null!=i)localStorage.getItem("poll_question_answer")!=i?($("ul.tabs li").removeClass("current"),$(".tab-content").removeClass("current"),$(".poll-tab").css("visibility","initial"),$(".poll-tab").addClass("current"),$("#tab-5").addClass("current"),$(".all-tabs").removeClass("h-100"),$(window).width()>600&&$(".all-tabs").is(":visible")&&$(".all-tabs").hide(),$("#tab-1").removeAttr("style"),$(".SLS-poll-panel").show(),setTimeout((()=>{$(".SLS-poll-panel").css("transform","translateY(0%)")}),10),$.ajax({type:"POST",dataType:"json",url:o+"index.php/Live/fetch_questions",data:"stream_id="+encodeURIComponent(streamId)+"&poll_question_id="+encodeURIComponent(i)+"&database="+encodeURIComponent(a),success:function(t){console.log(t),$("#add-poll").empty(),numbersString=t.data.options,queAdd='<div class="poll-header"><p class="d-inline share-panel-title" style="font-weight: 500;">'+t.data.question_title+'</p></div><div class="share-btn text-center mcq"><input type="hidden" id="poll-question-number" value="'+t.data.questions_id+'"><input type="hidden" id="poll-question-title" value="'+t.data.question_title+'">';var a=numbersString.split(","),o=a.length;$.each(a,(function(e,t){e+=1,queAdd+='<label class="mcq-answer"><input type="radio" name ="question1" id="answer'+e+'" value="'+t+'" onchange="switchbtn('+e+')"><div class="highlight highlight-answer'+e+'"></div><p class="options-text" id="answer-text-'+e+'">'+t+'</p><span class="feedback feedback-answer'+e+'"></span></label>'})),queAdd+="</div>",o>3&&(queAdd+='<div class="poll-scroll-text"><span>Scroll down</span><i class="fas fa-chevron-down"></i></div>'),queAdd+='<div class="poll-bottom-div"><div class="poll-time-progressbar"><div id="progressBarPoll" style="width: 1px;"></div></div><div class="bottom-action"><div class="total-votes-div" style="display:none"><img class="poll-users" src="https://cdn.jsdelivr.net/gh/SwirlAdmin/swirl-cdn/assets/images/webp/user-vote.webp"><span class="total_votes"><span id="totalVotes">0</span> votes</span></div><div class="d-inline"><span class="dot"></span><span class="question-timer">00:'+t.data.countdown_time+'</span></div><div class="d-inline"><span class="float-right skip-txt SLS-poll-panel-close">Skip</span></div></div></div>',$("#add-poll").append(queAdd),$(".mcq").on("scroll",s),function(t){e&&clearInterval(e);var a=(new Date).getTime()+1e3*t,o=$(".poll-time-progressbar").width();e=setInterval((function(){var s=(new Date).getTime(),i=a-s,n=Math.floor(i/1e3);$(".question-timer").text(n+" sec");var l=o*((1e3*t-i)/(1e3*t));if($("#progressBarPoll").css("width",l+"px"),i<0){clearInterval(e),$(".question-timer").text("0 sec"),$("#progressBarPoll").css("width",o+"px");let t="translateY(100%)";$(".SLS-poll-panel").css("transform",t),setTimeout((()=>{$(".SLS-poll-panel").hide()}),500),$(".poll-tab").css("visibility","hidden"),$(".product-tab-title").addClass("current"),$("#tab-2").addClass("current"),$(".all-tabs").addClass("h-100")}}),1e3)}(t.data.countdown_time)}})):$(".poll-tab").css("visibility","hidden");else{$(".poll-tab").css("visibility","hidden");let e="translateY(100%)";$(".SLS-poll-panel").css("transform",e),setTimeout((()=>{$(".SLS-poll-panel").hide()}),500)}}else $(".poll-tab").css("visibility","hidden")}))}}))}else $(".poll-tab").css("visibility","hidden");$("body").on("click",".SLS-poll-panel-close",(function(){$(".SLS-poll-panel").css("transform","translateY(100%)"),setTimeout((()=>{$(".SLS-poll-panel").hide()}),500),$(window).width()<768&&($(".poll-tab").css("visibility","hidden"),$(".tab-link.current").removeClass("current"),$('li.tab-link[data-tab="tab-1"]').css("display","block").addClass("current"),$("#tab-1").addClass("current"))}));var o=0;function s(e){var t=$(this).scrollTop();t>o?($(".poll-scroll-text span").text("scroll up"),$(".poll-scroll-text i").removeClass("fa-chevron-down").addClass("fa-chevron-up")):($(".poll-scroll-text span").text("scroll down"),$(".poll-scroll-text i").removeClass("fa-chevron-up").addClass("fa-chevron-down")),o=t}}));var getUrlParameter=function(e){var t,a,o=window.location.search.substring(1).split("&");for(a=0;a<o.length;a++)if((t=o[a].split("="))[0]===e)return void 0===t[1]||decodeURIComponent(t[1]);return!1};function executeCode(){var e=$("#designer_id").val(),t=new Date,a=String(t.getMonth()+1).padStart(2,"0"),o=t.getFullYear();"19791"!=e&&"23520"!=e&&"19187"!=e&&"18354"!=e||(localStorage.getItem("swirl_live_"+a+"_"+o)?db.collection(e+"_stream_users").doc("swirl_live_"+a+"_"+o).get().then((t=>{t.exists?db.collection(e+"_stream_users").doc("swirl_live_"+a+"_"+o).update({t_users:firebase.firestore.FieldValue.increment(1)}):db.collection(e+"_stream_users").doc("swirl_live_"+a+"_"+o).set({t_users:1,u_users:1})})):(localStorage.setItem("swirl_live_"+a+"_"+o,"1"),db.collection(e+"_stream_users").doc("swirl_live_"+a+"_"+o).get().then((t=>{t.exists?db.collection(e+"_stream_users").doc("swirl_live_"+a+"_"+o).update({u_users:firebase.firestore.FieldValue.increment(1),t_users:firebase.firestore.FieldValue.increment(1)}):db.collection(e+"_stream_users").doc("swirl_live_"+a+"_"+o).set({u_users:1,t_users:1})}))))}function executeCode_onload(){var e=$("#designer_id").val(),t=new Date,a=String(t.getMonth()+1).padStart(2,"0"),o=t.getFullYear();"19791"!=e&&"23520"!=e&&"19187"!=e&&"18354"!=e||(localStorage.getItem("swirl_live_on_load_"+a+"_"+o)?db.collection(e+"_stream_users_onload").doc("swirl_live_"+a+"_"+o).get().then((t=>{t.exists?db.collection(e+"_stream_users_onload").doc("swirl_live_"+a+"_"+o).update({t_users:firebase.firestore.FieldValue.increment(1)}):db.collection(e+"_stream_users_onload").doc("swirl_live_"+a+"_"+o).set({t_users:1,u_users:1})})):(localStorage.setItem("swirl_live_on_load_"+a+"_"+o,"1"),db.collection(e+"_stream_users_onload").doc("swirl_live_"+a+"_"+o).get().then((t=>{t.exists?db.collection(e+"_stream_users_onload").doc("swirl_live_"+a+"_"+o).update({u_users:firebase.firestore.FieldValue.increment(1),t_users:firebase.firestore.FieldValue.increment(1)}):db.collection(e+"_stream_users_onload").doc("swirl_live_"+a+"_"+o).set({u_users:1,t_users:1})}))))}function productupdates(){var e=$("#database").val(),t=$("#base_url").val(),a=$("#designer_id").val();$.ajax({type:"POST",dataType:"json",url:t+"index.php/Live/productupdates_vivo",data:"stream_id="+encodeURIComponent(streamId)+"&database="+encodeURIComponent(e),beforeSend:function(){},success:function(e){if(console.log(e),"1"==e.status_code){$('li.tab-link[data-tab="tab-4"]').removeClass("onlyoffer"),$("#product_count").text(e.data.product_count),$("#product_ids").val(e.data.product_ids),$(".SLS-added-products-static").hide(),$(".SLS-added-products-dynamic").empty();for(var t=0;t<e.data.product.length;t++){var o=e.data.product[t].link,s="";if("0"!=e.data.product_count){if("0"==e.data.is_product_price)var i="mb-2",n="d-none";else i="",n="d-block";if(1==e.data.product[t].is_star)var l="starproduct",r="inline";else l="",r="d-none";if(e.data.product[t].product_sell_price!=e.data.product[t].product_price)s='<s class="pl-2 cl-red">'+e.data.currencysymbols+e.data.product[t].product_price+"</s> ";$(".SLS-added-products-dynamic").append('<div class="d-flex align-items-start SLS-product-tile '+l+'"  id="pro-detail-'+e.data.product[t].product_id+'"><div class="SLS-product-image"><img src="'+e.data.product[t].product_img_url+'" alt="Product Image" title="Product Image" /></div><div class="SLS-product-content"><p class="m-0 '+i+'" title="'+e.data.product[t].product_title+'">'+e.data.product[t].product_title+'</p><label class="m-0 mb-2 '+n+'">'+e.data.currencysymbols+e.data.product[t].product_sell_price+"<del>"+s+'</del></label><button type="button" class="SLS-product-buynow-btn" data-protitle="'+e.data.product[t].product_title+'" data-proimg="'+e.data.product[t].product_img_url+'" data-proid="'+e.data.product[t].product_id+'" data-redirection="'+o+'" data-desid="'+a+'">'+e.data.cta_btn+'</button> </div><div class="'+r+'"><img class="star-animation setproduct" src="https://cdn.jsdelivr.net/gh/SwirlAdmin/swirl-cdn/assets/images/star-animation.gif"></div></div>')}}$(".showproduct-icon").addClass("d-inline"),$(".product-tab-title").show(),$(".product-tab-title").addClass("current"),$("#tab-2").addClass("current"),$("#tabs .mobile-tab").removeClass("current"),$("#tab-1").removeClass("current"),$("#tab-2").show(),$(".all-tabs").addClass("h-100"),$(".tab-link.current").removeClass("current"),$('li.tab-link[data-tab="tab-2"]').css("display","block").addClass("current")}}}),console.log("run")}setTimeout(executeCode,5e3),executeCode_onload();var docRef=db.collection("live_streams").doc(streamId);let previousProductStatusUpdated=null,isFirstSnapshot=!0;docRef.onSnapshot({includeMetadataChanges:!0},(e=>{if(e.exists){const t=e.data().product_status_updated;isFirstSnapshot?(isFirstSnapshot=!1,console.log("first")):(null!==previousProductStatusUpdated&&t>previousProductStatusUpdated||1===t)&&productupdates(),previousProductStatusUpdated=t}}));
//# sourceMappingURL=/sm/0741c96cd1119ad9c6abdf9f1cead7c526d56f03da2d49760ad6c5d768d9e4db.map