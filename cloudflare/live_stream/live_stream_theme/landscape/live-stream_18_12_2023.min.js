function SLSsetHeight(){let e=window.innerHeight;$(".SLS-main-conatiner").height(e)}$(document).ready((function(){$("#end_time").val(),$("#is_schedule").val();var e=$("#is_defer").val();if($(window).width()>768)setTimeout((()=>{$(".all-tabs").show(),2!=e&&$(".SLS-show-comments").click(),$(".SLS-comments-all").html($(".SLS-comments-all").find(".new").get().reverse())}),5e3);else{setTimeout((()=>{$(".SLS-comments-all").html($(".SLS-comments-all").find(".new").get().reverse()),isScrollBottom()}),1e3);var t=window.innerHeight-$(".video-box").height()-17;$(".data-box").height(t)}SLSsetHeight()})),$(window).resize((function(){SLSsetHeight()})),firebase.initializeApp({apiKey:"AIzaSyCWTGwzrHuwJY2yrmDcMm3Sm8Qfq1BtOw0",authDomain:"getnatty-1547727043139.firebaseapp.com",projectId:"getnatty-1547727043139",storageBucket:"getnatty-1547727043139.appspot.com"});var db=firebase.firestore(),player=videojs("livestreambro"),streamId=$("#stream_id").val();function SWIRLHeartFlaws(){var e=Math.floor(100*Math.random()+1),t=(Math.random()*(1.6-1.2)+1.2).toFixed(1);$('<div class="SWIRLheart part-'+e+" "+["colOne","colTwo","colThree","colFour","colFive","colSix"][Math.floor(6*Math.random())]+'" style="font-size:'+Math.floor(28*Math.random()+22)+'px;"><span></span></div>').appendTo(".SWIRLhearts").css({animation:["flowOne","flowTwo","flowThree"][Math.floor(3*Math.random())]+" "+t+"s linear"}),$(".part-"+e).show(),setTimeout((function(){$(".part-"+e).remove()}),900*t)}$(".SSV-heart-flaws-btn").on("click",(function(){$("#swirl-heart-icon").hide(),$("#swirl-heart-icon-mobile").hide(),$(".fill-heart").show(),SWIRLHeartFlaws(),SWIRLHeartFlaws(),SWIRLHeartFlaws()})),$(".SLS-products-panel").click((function(){$(".all-tabs").is(":visible")?$(".all-tabs").hide():($(".all-tabs").show(),$("ul.tabs li").removeClass("current"),$(".tab-content").removeClass("current"),$(".product-tab-title").addClass("current"),$("#tab-2").addClass("current"))})),$(".SLS-show-comments").click((function(){2!=is_defer&&($(this).find("svg").toggle(),$(".SLS-comments-panel").is(":visible")?($(".SLS-comments-panel").css("transform","translateY(100%)"),setTimeout((()=>{$(".SLS-comments-panel").hide()}),500)):($("#tab-1").show(),$(".SLS-comments-panel").removeClass("h-100"),$(".SLS-comments-panel").show(),setTimeout((()=>{$(".SLS-comments-panel").css("transform","translateY(0%)")}),10),isScrollBottom()))})),$(".muteicon").click((function(){$(".tooltiptext").css("visibility","hidden"),$(this).find("svg").toggle();var e=document.getElementById("livestreambro_html5_api");e.muted?e.muted=!1:e.muted=!0}));var code="+91";$(".mobile-input").val(code),$(".mobile-input").intlTelInput({autoHideDialCode:!0,autoPlaceholder:"ON",dropdownContainer:document.body,formatOnDisplay:!0,hiddenInput:"full_number",initialCountry:"auto",nationalMode:!0,placeholderNumberType:"MOBILE",preferredCountries:["in"],separateDialCode:!0}),$(".message-submit").click((function(){""!=$("#user_id").val()?($("#demo-modal-1").modal("hide"),insertMessage()):($("#demo-modal-1").modal("show"),$(".close1").css("display","none"))}));streamId=$("#stream_id").val();var is_defer=$("#is_defer").val(),autoverify_popup=$("#autoverify_popup").val();function backtoedit(e,t){$(e).trigger("next.m."+t),$(".resend-link").hide()}function otpcheck(){$(".err_user_cpassword").css("color","red");var e=$("#stream_id").val(),t=document.getElementById("otp").value,a=document.getElementById("otp_confirm").value,o=$("#mobile").intlTelInput("getSelectedCountryData").dialCode;if(t!=a)return $(".err_user_cpassword").html("OTP should be same.").fadeIn().delay(3e3).fadeOut(),$("#otp").focus(),!1;{$("#demo-modal-1").modal("toggle");var s=document.getElementById("name").value,n=document.getElementById("mobile").value,i=(new Date).getTime();let t=generateString(20);console.log(t),db.collection("messages").doc(e).collection("users").doc(t).set({user_id:t,country_code:o,name:s,phone:n,created_date:i,stream_id:e}),$("#user_id").val(t),$("#user_fname").val(s),$("#user_phone").val(n);try{localStorage.setItem("user_id",t),localStorage.setItem("user_fname",s),localStorage.setItem("user_phone",n)}catch(e){}insertMessage(),$(".rsvp-button").hide()}}function otpcheck_without_sp(e){if(0==e){if(""==(a=document.getElementById("name").value))return $(".error_msg").html("This is a required field.").fadeIn().delay(3e3).fadeOut(),$("#name").focus(),!1;if(a.length<3)return $(".error_msg").html("Please enter 3 latter.").fadeIn().delay(3e3).fadeOut(),$("#name").focus(),!1;{if(0==onlyAlphabets(a))return $(".error_msg").html("Name should be alphabets only").fadeIn().delay(3e3).fadeOut(),$("#name").focus(),!1;$("#demo-modal-1").modal("toggle");var t=$("#stream_id").val(),a=document.getElementById("name").value,o=(new Date).getTime();let s=generateString(20);db.collection("messages").doc(t).collection("users").doc(s).set({user_id:s,name:a,created_date:o,stream_id:t}),$("#user_id").val(s),$("#user_fname").val(a);try{localStorage.setItem("user_id",s),localStorage.setItem("user_fname",a)}catch(e){}insertMessage()}}else{a=document.getElementById("name").value;var s=document.getElementById("mobile").value;if(""==a)return $(".error_msg").html("This is a required field.").fadeIn().delay(3e3).fadeOut(),$("#name").focus(),!1;if(a.length<3)return $(".error_msg").html("Please enter 3 latter.").fadeIn().delay(3e3).fadeOut(),$("#name").focus(),!1;if(""==s)return $(".error_msg").html("This is a required field.").fadeIn().delay(3e3).fadeOut(),$("#mobile").focus(),!1;if(s.length<10||s.length>10)return $(".error_msg").html("Please Enter 10 Digit Mobile No.").fadeIn().delay(3e3).fadeOut(),$("#mobile").focus(),!1;{if(0==onlyAlphabets(a))return $(".error_msg").html("Name should be alphabets only").fadeIn().delay(3e3).fadeOut(),$("#name").focus(),!1;var n=$("#mobile").intlTelInput("getSelectedCountryData").dialCode;$("#demo-modal-1").modal("toggle");a=document.getElementById("name").value;var i=document.getElementById("mobile").value;if(""==i)s="";else s=i;t=$("#stream_id").val(),o=(new Date).getTime();let d=generateString(20);n=null!=n?n:"",db.collection("messages").doc(t).collection("users").doc(d).set({user_id:d,country_code:n,name:a,phone:s,created_date:o,stream_id:t}),$("#user_id").val(d),$("#user_fname").val(a),$("#user_phone").val(s),$("#country_code").val(n);try{localStorage.setItem("user_id",d),localStorage.setItem("user_fname",a),localStorage.setItem("user_phone",s),localStorage.setItem("country_code",n)}catch(e){}insertMessage()}}}function insertMessage(){if(""==$(".message-input").val())return $(".message-input").focus(),!1;sendMessage()}function sendMessage(e){var t=$("#user_id").val(),a=$("#user_fname").val(),o=$("#user_phone").val(),s=(new Date).getTime(),n=document.getElementById("SLS-comment").value;db.collection("messages").doc(streamId).collection("messages").add({cover_img:"",created_time:s,from:t,is_designer:!1,is_designer_seen:!1,message:n,name:a,profile:"",title:"",type:"text",user_percentage:"20",user_phone:o,flag:"0"}),$(".message-input").val(null),$(".message-input-mobile").val(null),$(".collapsable").css("display","none"),$(window).width()<768&&$(".action-bar").css("display","table-cell"),$(".message-textbox-div").css("width","50%"),$(".message-textbox-div").css("padding-right","0px")}if(db.collection("live_streams").doc(streamId).onSnapshot({includeMetadataChanges:!0},(e=>{if(1==e.exists){var t="";""==e.data().is_recorded&&"undefined"==e.data().is_recorded||(t=e.data().is_recorded),1==t?($("#livestatus").text("RECORDED"),$("#livestatus").addClass("recordingflag")):($("#livestatus").text("LIVE"),$("#livestatus").addClass("liveflag"),1==autoverify_popup&&$(".rsvp-button").click())}else 2==is_defer&&($("#livestatus").text("UPCOMING"),$("#livestatus").addClass("upcoming-flag"),$("#viewcount").hide())})),$("#mobile").on("keydown",(function(e){13==e.which&&sendEvent("#demo-modal-1",2)})),$("#otp").on("keydown",(function(e){13==e.which&&otpcheck()})),sendEvent=function(e,t){$(".err_user_cpassword").css("color","red");var a=$("#base_url").val(),o=document.getElementById("name").value,s=document.getElementById("mobile").value,n=$("#mobile").intlTelInput("getSelectedCountryData").dialCode;if(""==o)return $(".err_user_cpassword").html("This is a required field.").fadeIn().delay(3e3).fadeOut(),$("#name").focus(),!1;if(o.length<3)return $(".err_user_cpassword").html("Please enter 3 latter.").fadeIn().delay(3e3).fadeOut(),$("#name").focus(),!1;if(""==s)return $(".err_user_cpassword").html("This is a required field.").fadeIn().delay(3e3).fadeOut(),$("#mobile").focus(),!1;if(s.length<10||s.length>10)return $(".err_user_cpassword").html("Please Enter 10 Digit Mobile No.").fadeIn().delay(3e3).fadeOut(),$("#mobile").focus(),!1;if(0==onlyAlphabets(o))return $(".err_user_cpassword").html("Name should be alphabets only").fadeIn().delay(3e3).fadeOut(),$("#name").focus(),!1;$(".close1").css("display","block");s=$("#mobile").val();var i=Math.floor(1e3+9e3*Math.random());$("#otp_confirm").val(i),$.ajax({type:"POST",dataType:"json",url:a+"index.php/Live/send_otp",data:"mobile="+encodeURIComponent(s)+"&otp="+encodeURIComponent(i)+"&code="+encodeURIComponent(n),success:function(e){}}),$(e).trigger("next.m."+t),$(".resend-link").show()},resendotp=function(e,t){$(".err_user_cpassword").css("color","red");var a=$("#base_url").val(),o=document.getElementById("name").value,s=document.getElementById("mobile").value,n=$("#mobile").intlTelInput("getSelectedCountryData").dialCode;if(""==o)return $(".err_user_cpassword").html("This is a required field.").fadeIn().delay(3e3).fadeOut(),$("#name").focus(),!1;if(o.length<3)return $(".err_user_cpassword").html("Please enter 3 latter.").fadeIn().delay(3e3).fadeOut(),$("#name").focus(),!1;if(""==s)return $(".err_user_cpassword").html("This is a required field.").fadeIn().delay(3e3).fadeOut(),$("#mobile").focus(),!1;if(s.length<10||s.length>10)return $(".err_user_cpassword").html("Please Enter 10 Digit Mobile No.").fadeIn().delay(3e3).fadeOut(),$("#mobile").focus(),!1;if(0==onlyAlphabets(o))return $(".err_user_cpassword").html("Name should be alphabets only").fadeIn().delay(3e3).fadeOut(),$("#name").focus(),!1;$(".close1").css("display","block");s=$("#mobile").val();var i=Math.floor(1e3+9e3*Math.random());$("#otp_confirm").val(i),$(".err_user_cpassword").css("color","#20B641"),$(".err_user_cpassword").html("Resend otp successfully.").fadeIn().delay(3e3).fadeOut(),$.ajax({type:"POST",dataType:"json",url:a+"index.php/Live/send_otp",data:"mobile="+encodeURIComponent(s)+"&otp="+encodeURIComponent(i)+"&code="+encodeURIComponent(n),success:function(e){}}),$(e).trigger("next.m."+t),$(".resend-link").show()},$("#close-popup-btn").click((function(){$(".modal-backdrop").remove()})),$("#close-popup-btn-1").click((function(){$(".modal-backdrop").remove()})),$(".askque-popup-icon").click((function(){$("#askque-popup").modal("toggle")})),$(".rsvp-button").click((function(){""!=$("#user_id").val()?$("#demo-modal-1").modal("hide"):($("#demo-modal-1").modal("show"),$(".close1").css("display","none"))})),"0000-00-00 00:00:00"!=(end_time=$("#end_time").val()))try{localStorage.removeItem("user_id"),localStorage.removeItem("user_fname"),localStorage.removeItem("user_phone"),localStorage.removeItem("user_email")}catch(e){}try{null!=localStorage.getItem("user_id")&&(res=localStorage.getItem("user_id"),$("#user_id").val(res)),null!=localStorage.getItem("user_fname")&&(res1=localStorage.getItem("user_fname"),$("#user_fname").val(res1)),null!=localStorage.getItem("user_phone")&&(res2=localStorage.getItem("user_phone"),$("#user_phone").val(res2)),null!=localStorage.getItem("user_email")&&(res3=localStorage.getItem("user_email"),$("#user_email_local").val(res3)),null!=localStorage.getItem("country_code")&&(res4=localStorage.getItem("country_code"),$("#country_code").val(res4))}catch(e){}var user_id=$("#user_id").val();function openFullscreen(){document.body.requestFullscreen(),screen.orientation.lock("landscape")}function closeFullscreen(){screen.orientation.lock("portrait")}function closeFullscreen(){document.exitFullscreen()}""!=user_id?$(".rsvp-button").hide():$(".rsvp-button").show(),$(window).on("keydown",(function(e){if(13==e.which)return""!=$("#user_id").val()?($("#demo-modal-1").modal("hide"),insertMessage()):($("#demo-modal-1").modal("show"),$(".close1").css("display","none")),!1})),$(document).ready((function(){$("ul.tabs li").click((function(){var e=$(this).attr("data-tab");"tab-1"==e?($(".all-tabs").removeClass("h-100"),$(window).width()<768&&$(".SLS-comments-panel").addClass("h-100"),pinheight()):$(".all-tabs").addClass("h-100"),$("ul.tabs li").removeClass("current"),$(".tab-content").removeClass("current"),$(this).addClass("current"),$("#"+e).addClass("current")}))}));streamId=$("#stream_id").val();var comments_limit=$("#comments_limit").val();function isScrollBottom(){$(".SLS-comments-all").animate({scrollTop:$(".SLS-comments-all").get(0).scrollHeight},0)}function pinheight(){setTimeout((()=>{var e=$(".messages-pin").height();e="calc(100% - "+(e=110+e)+"px)",$(".SLS-comments-all").css("height",e)}),100)}function convertMsToTime(e){var t=new Date(e);timezone=t.toString();var a=new Date(timezone);return localtime=a.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}),localtime}db.collection("messages").doc(streamId).collection("messages").orderBy("created_time","desc").limit(comments_limit).onSnapshot((e=>{size=e.size,e.docChanges().forEach((e=>{if("1"===e.doc.data().flag)if("removed"===e.type)$("#message-"+e.doc.id).remove();else{var t=$("#designer_id").val(),a=(t=$("#designer_id").val(),convertMsToTime(e.doc.data().created_time));if(e.doc.data().from==t)var o="fillcolor",s="brand-time",n=' <img src="'+$("#brand_logo").val()+'" alt="Brand logo" title="'+e.doc.data().name+'" />';else o="user-comments",s="",n='<i class="fas fa-user-circle" style="font-size:30px"></i>';if(1==isValidUrl(e.doc.data().message)){var i=urlify(e.doc.data().message);$('<div id="message-'+e.doc.id+'" class="new"><div class="'+o+' msgcontent-div"><div class="icon">'+n+'</div><div class="msg-content"><p>'+e.doc.data().name+' <span class="time '+s+'">'+a+"</span></p><p>"+i+"</p></div></div></div>").appendTo($(".SLS-comments-all")).addClass("new")}else $('<div id="message-'+e.doc.id+'" class="new"><div class="'+o+' msgcontent-div"><div class="icon">'+n+'</div><div class="msg-content"><p>'+e.doc.data().name+' <span class="time '+s+'">'+a+"</span></p><p>"+e.doc.data().message+"</p></div></div></div>").appendTo($(".SLS-comments-all")).addClass("new")}setTimeout((function(){db.collection("messages").doc(streamId).collection("messages").doc(e.doc.id).update({flag:"1"})}),5e3)})),isScrollBottom()})),db.collection("live_streams").doc(streamId).onSnapshot((e=>{if(e.exists){var t=e.data().pin_comment_id;if(""!=t&&null!=t)db.collection("messages").doc(streamId).collection("messages").doc(t).get().then((e=>{if(e.exists){$(".messages-pin").empty(),$(".messages-pin-mobile").empty();var t=' <img src="'+$("#brand_logo").val()+'" alt="Brand logo" title="'+e.data().name+'" />';if(1==isValidUrl(e.data().message)){var a=urlify(e.data().message);if($('<div id="message-'+e.id+'" class="new"><div class="pin-main-div"><div class="icon pin-user-pic">'+t+'</div><div class="msg-content pin-msg-content"><p>'+e.data().name+"</p><p>"+a+'</p></div><div class="pin-main-icon"><span class="pinicon"><i class="icon-pushpin"></i></span></div></div>').appendTo($(".messages-pin")).addClass("new"),$(window).width()<768)o="calc(100% - "+(o=110+(o=$(".messages-pin").height()))+"px)",$(".SLS-comments-all").css("height",o)}else{if($('<div id="message-'+e.id+'" class="new"><div class="pin-main-div"><div class="icon pin-user-pic">'+t+'</div><div class="msg-content pin-msg-content"><p>'+e.data().name+" </p><p>"+e.data().message+'</p></div><div class="pin-main-icon"><span class="pinicon"><i class="icon-pushpin"></i></span></div></div></div>').appendTo($(".messages-pin")).addClass("new"),$(window).width()<768)o="calc(100% - "+(o=110+(o=$(".messages-pin").height()))+"px)",$(".SLS-comments-all").css("height",o)}}else{var o;if($(".messages-pin").empty(),$(".messages-pin-mobile").empty(),$(window).width()<768)o="calc(100% - "+(o=100)+"px)",$(".SLS-comments-all").css("height",o)}}));else if($(".messages-pin").empty(),$(window).width()<768){var a=100;a="calc(100% - "+a+"px)",$(".SLS-comments-all").css("height",a)}if(1==e.data().is_live){var o=$("#base_url").val(),s=$("#product_ids").val(),n=$("#designer_id").val(),i=$("#star_products").val();setInterval((function(){$.ajax({type:"POST",dataType:"json",url:o+"index.php/Live/otmanyproductlist",data:"stream_id="+encodeURIComponent(streamId)+"&productIds="+encodeURIComponent(s)+"&star_products="+encodeURIComponent(i),beforeSend:function(){},success:function(e){if(console.log(e),"1"==e.status_code){if($("#product_count").text(e.data.product_count),$(".SLS-added-products-static").hide(),$(".SLS-added-products-dynamic").empty(),"0"!=e.data.product_count){if("0"==e.data.is_product_price)var t="mb-2",a="d-none";else t="",a="d-block";for(var o=0;o<e.data.product.length;o++){var d=e.data.product[o].link,r="";if(1==e.data.product[o].is_star)var l="starproduct",c="inline";else l="",c="d-none";if(e.data.product[o].product_sell_price!=e.data.product[o].product_price)r='<s class="pl-2 cl-red">'+e.data.currencysymbols+" "+e.data.product[o].product_price+"</s> ";newRowAdd='<div class="d-flex align-items-start SLS-product-tile '+l+'" id="pro-detail-'+e.data.product[o].product_id+'"><div class="SLS-product-image"><img src="'+e.data.product[o].product_img_url+'" alt="Product Image" title="Product Image"></div><div class="SLS-product-content"><p class="m-0 '+t+'" title="'+e.data.product[o].product_title+'">'+e.data.product[o].product_title+'</p><label class="m-0 mb-2 '+a+'">'+e.data.currencysymbols+" "+e.data.product[o].product_sell_price+"<del>"+r+'</del> </label><button type="button" class="SLS-product-buynow-btn" data-protitle="'+e.data.product[o].product_title+'" data-proimg="'+e.data.product[o].product_img_url+'" data-proid="'+e.data.product[o].product_id+'" data-redirection="'+d+'" data-desid="'+n+'">'+e.data.btn2_title+'</button></div><div class="'+c+'"><img class="star-animation setproduct" src="https://cdn.jsdelivr.net/gh/SwirlAdmin/swirl-cdn/assets/images/star-animation.gif" class=""></div></div>',$(".SLS-added-products-dynamic").append(newRowAdd)}}s=e.data.product_ids,i=e.data.star_products}}})}),6e4)}}}));const isValidUrl=e=>null!==e.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g);function urlify(e){if(-1!==e.indexOf("https")){return e.replace(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g,(function(e){return/^((http|https|ftp):\/\/)/.test(e)||(e="https://"+e),'<a style="word-break:break-all" href="'+e+'" target="_blank">'+e+"</a>"}))}return e}$("body").on("click",".SLS-product-buynow-btn",(function(){var e=$(this).attr("data-proid"),t=$(this).attr("data-desid"),a=$(this).attr("data-protitle"),o=$(this).attr("data-proimg"),s=$(this).attr("data-redirection"),n=$("#user_id").val(),i=$("#user_fname").val(),d=$("#user_phone").val(),r=$("#country_code").val(),l=(new Date).getTime();let c=generateString(20);db.collection("messages").doc(streamId).collection("buy_now").doc(c).set({user_id:n,country_code:r,name:i,phone:d,created_date:l,stream_id:streamId,product_id:e,product_title:a,product_image:o,product_url:s,designer_id:t});var m=navigator.userAgent||navigator.vendor||window.opera;/iPad|iPhone|iPod/.test(m)&&!window.MSStream?$(".SLS-product-buynow-btn").click((function(){var e=window.open(s,"_blank");$.ajax({type:"POST",url:"/echo/json/",success:function(t){e.location}})})):window.open(s,"_blank")}));const characters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function generateString(e){let t="";const a=characters.length;for(let o=0;o<e;o++)t+=characters.charAt(Math.floor(Math.random()*a));return t}var fbButton=document.getElementById("fb-share-button"),url=$("#copy-text").val();function copy_text(){var e=document.getElementById("copy-text");e.select(),e.setSelectionRange(0,99999),navigator.clipboard.writeText(e.value),$('[data-toggle="tooltip"]').tooltip(),$("#btn-copy").html("Copied")}function onlyAlphabets(e){return!!/^[a-zA-Z ]*$/.test(e)}function ask_que_submit(e,t){var a=$("#base_url").val(),o=$("#user_id").val(),s=$("#user_fname").val(),n=$("#user_phone").val(),i=document.getElementById("inquiry_text_ask").value;if(""==i)return $(".err_ask").css("color","red"),$(".err_ask").html("This is a required field.").fadeIn().delay(3e3).fadeOut(),$("#inquiry_text_ask").focus(),!1;""==o?($("#askque-popup").modal("hide"),$("#inquiry_text_ask").val(i),$("#demo-modal-1").modal("show")):$.ajax({type:"POST",dataType:"json",url:a+"index.php/Live/ask_que_details",data:"user_id="+encodeURIComponent(o)+"&user_fname="+encodeURIComponent(s)+"&user_phone="+encodeURIComponent(n)+"&designer_id="+encodeURIComponent(e)+"&msg="+encodeURIComponent(i)+"&live_id="+encodeURIComponent(t)+"&swirls_id="+encodeURIComponent(""),success:function(e){$(".err_ask").css("color","#20B641"),$(".err_ask").html(e.message).fadeIn().delay(3e3).fadeOut(),$("#inquiry_text_ask").val(""),ask_que_count()}})}function ask_que_submit_mobile(e,t){var a=$("#base_url").val(),o=$("#user_id").val(),s=$("#user_fname").val(),n=$("#user_phone").val(),i=document.getElementById("inquiry_text_ask_mobile").value;if(""==i)return $(".err_ask_mobile").css("color","red"),$(".err_ask_mobile").html("This is a required field.").fadeIn().delay(3e3).fadeOut(),$("#inquiry_text_ask_mobile").focus(),!1;""==o?($("#askque-popup").modal("hide"),$("#inquiry_text_ask_mobile").val(i),$("#demo-modal-1").modal("show")):$.ajax({type:"POST",dataType:"json",url:a+"index.php/Live/ask_que_details",data:"user_id="+encodeURIComponent(o)+"&user_fname="+encodeURIComponent(s)+"&user_phone="+encodeURIComponent(n)+"&designer_id="+encodeURIComponent(e)+"&msg="+encodeURIComponent(i)+"&live_id="+encodeURIComponent(t)+"&swirls_id="+encodeURIComponent(""),success:function(e){$(".err_ask_mobile").css("color","#20B641"),$(".err_ask_mobile").html(e.message).fadeIn().delay(3e3).fadeOut(),$("#inquiry_text_ask_mobile").val(""),ask_que_count()}})}function ask_que_count(){db.collection("live_streams").doc(streamId).get().then((e=>{var t=e.data().ask_que_count;t++,db.collection("live_streams").doc(streamId).update({ask_que_count:t})}))}function reloadOnceLive(){db.collection("live_streams").doc(streamId).onSnapshot((e=>{var t="idle";2==$("#is_defer").val()?($("#black-screen").hide(),$("#remote-media").show(),$(".muteicon").show(),$(".share-div").show(),$(".live-status").show(),$(".SL-schedule-timer").show()):($("#remote-media").hide(),$("#black-screen").show(),$(".live-status").hide()),$(".product-img-list").hide();var a=streamId;if(e.exists){let e=setInterval((function(){"idle"==t&&$.ajax({url:"https://store.goswirl.live/index.php/api/Mogicon/muxLiveStreamStatus",method:"POST",dataType:"JSON",data:{stream_id:a},success:function(a){console.log("auto-refresh response"+a),"active"==a.status&&(t="active",clearInterval(e),window.location=window.location.href+"?live=true")}})}),3e3)}}))}fbButton.addEventListener("click",(function(){return window.open("https://www.facebook.com/sharer/sharer.php?u="+url,"facebook-share-dialog","width=800,height=600"),!1})),$(document).ready((function(){db.collection("live_streams").doc(streamId).onSnapshot((e=>{e.exists||reloadOnceLive()}))}));var end_time=$("#end_time").val();is_defer=$("#is_defer").val();function doFirst(){barSize=$("#defaultBar").width(),$("#defaultBar").css("width",barSize),myVideo=document.getElementById("livestreambro_html5_api"),playButton=document.getElementById("playButton"),icon=document.getElementById("play-pause-icon"),defaultBar=document.getElementById("defaultBar"),progressBar=document.getElementById("progressBar"),playButton.addEventListener("click",playOrPause,!1),defaultBar.addEventListener("click",clickedBar,!1),$(".current-time").text(time_format(0)),$(".duration").text(time_format(player.duration())),updateBar=setInterval(update,500)}function playOrPause(){myVideo.paused||myVideo.ended?(myVideo.play(),icon.className="fa fa-pause",updateBar=setInterval(update,500)):(myVideo.pause(),icon.className="fa fa-play",window.clearInterval(updateBar))}function clickedBar(e){if(!myVideo.paused&&!myVideo.ended){barSize=$("#defaultBar").width(),$("#defaultBar").css("width",barSize);var t=e.pageX-$("#defaultBar").offset().left,a=t*myVideo.duration/barSize;myVideo.currentTime=a,progressBar.style.width=t+"px"}}function update(){if(myVideo.ended)progressBar.style.width="0px",icon.className="fa fa-pause",window.clearInterval(updateBar);else{barSize=$("#defaultBar").width(),$("#defaultBar").css("width",barSize);var e=parseInt(myVideo.currentTime*barSize/myVideo.duration);progressBar.style.width=e+"px"}}function time_format(e){var t=Math.floor(e/60)<10?"0"+Math.floor(e/60):Math.floor(e/60);return t+":"+(Math.floor(e-60*t)<10?"0"+Math.floor(e-60*t):Math.floor(e-60*t))}function nFormatter(e){return e>=1e9?(e/1e9).toFixed(1).replace(/\.0$/,"")+"G":e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e5?(e/1e5).toFixed(1).replace(/\.0$/,"")+"L":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e}if($("#black-screen").hide(),db.collection("live_streams").doc(streamId).onSnapshot((e=>{if(e.exists)$("#black-screen").hide(),$(".flag").show(),$("#remote-media").show(),1==e.data().is_paused&&($("#remote-media").hide(),$("#black-screen").show(),$("#stream_span").html("paused & will resume shortly"));else if("0000-00-00 00:00:00"==end_time){if($("#black-screen").show(),2!=is_defer){$(".flag").hide(),$(".top-bar .text-left").hide(),$(".top-bar .muteicon svg").hide(),$(".top-bar .share-icon svg").hide(),$(".close-icon svg path").css("fill","#000");var t=window.innerHeight-$("#black-screen").height()-17;$(".data-box").height(t),$(window).width()>768&&($("#tab-1").addClass("banner-tab-hide"),$(".SLS-product-tile").css("border","1px solid #0000004D"),$(".offer-style p").css("border","1px solid #0000004D")),$(".swirl-heart-shaped").hide(),$(".fullscreen-icon").hide(),$(".action-bar").hide()}else{$(".SSV-heart-flaws-btn svg").hide(),$(".askque-popup-icon svg").hide(),$(".SLS-show-comments .comment-off").hide(),$(".SLS-show-comments .comment-on").hide(),$(".SLS-show-comments").css("display","none !important"),$(".askque-popup-icon").css("display","none !important"),$(".SLS-show-comments").removeClass("pr-2"),$(".askque-popup-icon").removeClass("pr-2"),$(".showproduct-icon").removeClass("pr-2"),$(".close-icon svg path").css("fill","#fff");t=window.innerHeight-$("#black-screen").height();t+=70,$(".data-box").height(t)}$("#remote-media").hide()}else $("#remote-media").show(),$("#black-screen").hide()})),window.addEventListener("load",doFirst,!1),player.on("timeupdate",(function(){$(".current-time").text(time_format(player.currentTime())),$(".duration").text(time_format(player.duration()))})),db.collection("live_streams").doc(streamId).onSnapshot((e=>{e.exists?db.collection("live_streams").doc(streamId).onSnapshot({includeMetadataChanges:!0},(e=>{1==e.data().comments_status?$("#Search").show():$("#Search").hide(),1==e.data().fire_status?$("#gif").show():$("#gif").hide();var t=e.data().ivs_viewer_count;null!=t||null!=t?(result=nFormatter(t),$("#view-count").text(result)):$("#view-count").text(0)})):($(".SLS-comment-form").hide(),$(".message-textbox-div").css("display","none !important"),$("#gif").hide())})),2==(is_defer=$("#is_defer").val())){var id="undefined",starting_time=$("#starting_time").val(),countDownDate=[],x=[],now=[],distance=[],days=[],hours=[],minutes=[],seconds=[];countDownDate[id]=new Date(starting_time.replaceAll("-","/")).getTime(),x[id]=setInterval((function(){now[id]=(new Date).getTime(),distance[id]=countDownDate[id]-now[id],days[id]=Math.floor(distance[id]/864e5),hours[id]=Math.floor(distance[id]%864e5/36e5),minutes[id]=Math.floor(distance[id]%36e5/6e4),seconds[id]=Math.floor(distance[id]%6e4/1e3),document.getElementById(`${id}day`).innerHTML=String(days[id]).padStart(2,"0"),document.getElementById(`${id}hour`).innerHTML=String(hours[id]).padStart(2,"0"),document.getElementById(`${id}min`).innerHTML=String(minutes[id]).padStart(2,"0"),document.getElementById(`${id}sec`).innerHTML=String(seconds[id]).padStart(2,"0"),distance[id]<0&&(clearInterval(x[id]),$(".SL-schedule-timer").hide(),document.getElementById(`${id}day`).innerHTML="00",document.getElementById(`${id}hour`).innerHTML="00",document.getElementById(`${id}min`).innerHTML="00",document.getElementById(`${id}sec`).innerHTML="00")}),1e3)}
//# sourceMappingURL=/sm/d9fbe599f2f33b92905de2097332dc03bbb1de4b101bfd9a74878b5edc71e51a.map