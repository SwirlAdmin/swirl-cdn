function SLSsetHeight(){let e=window.innerHeight;$(".SLS-main-conatiner").height(e)}$(document).ready((function(){$(window).width()>768?($("#SWIRLhearts-mobile").hide(),$("#SWIRLhearts-web").show(),setTimeout((()=>{$(".SLS-control-panel .SLS-show-products").click(),$(".SLS-show-comments").click(),$(".SLS-comments-all").html($(".SLS-comments-all").find(".new").get().reverse()),pinheightweb()}),5e3)):($("#SWIRLhearts-web").hide(),$("#SWIRLhearts-mobile").show(),$(".SLS-show-comments").click()),SLSsetHeight()})),$(window).resize((function(){SLSsetHeight()}));var player=videojs("livestreambro"),actionbar_size=56,productsid=$("#product_ids").val(),showcase_bar=""!=productsid?120:0;if("0000-00-00 00:00:00"!=(end_time=$("#end_time").val()))var recordingcontrol_size=34;else{$(".messages-pin-mobile").css("bottom","56px");recordingcontrol_size=0}function time_format(e){var t=Math.floor(e/60)<10?"0"+Math.floor(e/60):Math.floor(e/60);return t+":"+(Math.floor(e-60*t)<10?"0"+Math.floor(e-60*t):Math.floor(e-60*t))}function doFirst(){barSize=$("#defaultBar").width(),$("#defaultBar").css("width",barSize),myVideo=document.getElementById("livestreambro_html5_api"),playButton=document.getElementById("playButton"),playButton_mobile=document.getElementById("playButton-mobile"),icon=document.getElementById("play-pause-icon"),icon_mobile=document.getElementById("play-pause-icon-mobile"),defaultBar=document.getElementById("defaultBar"),progressBar=document.getElementById("progressBar"),defaultBar_mobile=document.getElementById("defaultBar-mobile"),progressBar_mobile=document.getElementById("progressBar-mobile"),playButton.addEventListener("click",playOrPause,!1),defaultBar.addEventListener("click",clickedBar,!1),playButton_mobile.addEventListener("click",playOrPauseMobile,!1),defaultBar_mobile.addEventListener("click",clickedBar_mobile,!1),$(".current").text(time_format(0)),$(".duration").text(time_format(player.duration())),updateBar=setInterval(update,500),updateBar=setInterval(updateMobile,500)}function playOrPause(){myVideo.paused||myVideo.ended?(myVideo.play(),icon.className="fa fa-pause",updateBar=setInterval(update,500)):(myVideo.pause(),icon.className="fa fa-play",window.clearInterval(updateBar))}function playOrPauseMobile(){myVideo.paused||myVideo.ended?(myVideo.play(),icon_mobile.className="fa fa-pause",updateBar=setInterval(updateMobile,500)):(myVideo.pause(),icon_mobile.className="fa fa-play",window.clearInterval(updateBar))}function update(){if(myVideo.ended)progressBar.style.width="0px",icon.className="fa fa-pause",window.clearInterval(updateBar);else{barSize=$("#defaultBar").width(),$("#defaultBar").css("width",barSize);var e=parseInt(myVideo.currentTime*barSize/myVideo.duration);progressBar.style.width=e+"px"}}function updateMobile(){if(myVideo.ended)progressBar.style.width="0px",icon_mobile.className="fa fa-pause",window.clearInterval(updateBar);else{barSize=$("#defaultBar-mobile").width(),$("#defaultBar-mobile").css("width",barSize);var e=parseInt(myVideo.currentTime*barSize/myVideo.duration);progressBar_mobile.style.width=e+"px"}}function clickedBar(e){if(!myVideo.paused&&!myVideo.ended){barSize=$("#defaultBar").width(),$("#defaultBar").css("width",barSize);var t=e.pageX-$("#defaultBar").offset().left,a=t*myVideo.duration/barSize;myVideo.currentTime=a,progressBar.style.width=t+"px"}}function clickedBar_mobile(e){if(!myVideo.paused&&!myVideo.ended){barSize=$("#defaultBar-mobile").width(),$("#defaultBar-mobile").css("width",barSize);var t=e.pageX-$("#defaultBar-mobile").offset().left,a=t*myVideo.duration/barSize;myVideo.currentTime=a,progressBar_mobile.style.width=t+"px"}}function SWIRLHeartFlaws(){var e=Math.floor(100*Math.random()+1),t=(Math.random()*(1.6-1.2)+1.2).toFixed(1);$('<div class="SWIRLheart part-'+e+" "+["colOne","colTwo","colThree","colFour","colFive","colSix"][Math.floor(6*Math.random())]+'" style="font-size:'+Math.floor(28*Math.random()+22)+'px;"><span></span></div>').appendTo(".SWIRLhearts").css({animation:["flowOne","flowTwo","flowThree"][Math.floor(3*Math.random())]+" "+t+"s linear"}),$(".part-"+e).show(),setTimeout((function(){$(".part-"+e).remove()}),900*t)}function showcase_products(e){if($(".SLS-products-panel").is(":visible"))$(".SLS-products-panel-close").click();else{var t=$(e).attr("data-proid");if($(window).width()<768){let e=$(".messages-pin-mobile").height()+actionbar_size+recordingcontrol_size;$(".SLS-products-panel").css("bottom",e),$(".SLS-comments-panel-close").click(),$(".SLS-share-panel-close").click(),$(".SLS-ask-panel-close").click()}$(".SLS-products-panel").show(),setTimeout((()=>{let e=$(window).width()>768?"translateX(0%)":"translateY(0%)";$(".SLS-products-panel").css("transform",e)}),10),$(".SLS-products-panel").css("height","28%"),$(".SLS-product-tile").css("border-bottom","unset"),$(".SLS-added-products .SLS-product-tile").addClass("hide"),$("#pro-detail-pro-"+t).removeClass("hide")}}player.on("timeupdate",(function(){$(".current").text(time_format(player.currentTime())),$(".duration").text(time_format(player.duration()))})),window.addEventListener("load",doFirst,!1),$(".message-input-mobile").keyup((function(e){$(".collapsable").css("display","table-cell"),$(".action-bar").css("display","none"),$(".message-textbox-div").css("width","90%"),$(".message-textbox-div").css("padding-right","5px")})),$(".collapsable").click((function(){$(".collapsable").css("display","none"),$(".action-bar").css("display","table-cell"),$(".message-textbox-div").css("width","50%"),$(".message-textbox-div").css("padding-right","0px")})),$(".SSV-heart-flaws-btn").on("click",(function(){($(".swirl-heart-shaped .st0").css("fill","red"),$(".swirl-heart-shaped .st0").css("stroke","red"),SWIRLHeartFlaws(),SWIRLHeartFlaws(),SWIRLHeartFlaws(),null==localStorage.getItem("heart_like"))&&(value=1,db.collection("live_streams").doc(streamId).get().then((e=>{var t=e.data().heart_like;t=null==t?0:t,t+=1,localStorage.setItem("heart_like",t),db.collection("live_streams").doc(streamId).update({heart_like:t})})));db.collection("live_streams").doc(streamId).get().then((e=>{var t=e.data().click_heart_like;t=null==t?0:t,t+=1,db.collection("live_streams").doc(streamId).update({click_heart_like:t})}))})),$(document).on("click touchstart","video",(function(){$(window).width()<768&&($(".SLS-products-panel-close").click(),$(".SLS-comments-panel-close").click(),$(".SLS-ask-panel-close").click(),$(".SLS-share-panel-close").click(),$(".SLS-offer-panel-close").click())})),$(".SLS-ask").click((function(){if($(".SLS-ask-panel").is(":visible"))$(".SLS-ask-panel-close").click();else{if($(window).width()<768){let e=$(".messages-pin-mobile").height()+actionbar_size+recordingcontrol_size;$(".SLS-ask-panel").css("bottom",e),$(".SLS-products-panel-close").click(),$(".SLS-comments-panel-close").click(),$(".SLS-offer-panel-close").click()}$(".SLS-share-panel-close").click(),$(".SLS-ask-panel").show(),setTimeout((()=>{$(".SLS-ask-panel").css("transform","translateY(0%)")}),10)}})),$(".SLS-ask-panel-close").click((function(){$(".SLS-ask-panel").css("transform","translateY(100%)"),setTimeout((()=>{$(".SLS-ask-panel").hide()}),500)})),$(".SLS-share").click((function(){if($(".SLS-share-panel").is(":visible"))$(".SLS-share-panel-close").click();else{if($(window).width()<768){let e=$(".messages-pin-mobile").height()+actionbar_size+recordingcontrol_size;$(".SLS-share-panel").css("bottom",e),$(".SLS-products-panel-close").click(),$(".SLS-comments-panel-close").click(),$(".SLS-offer-panel-close").click()}else 2==is_defer&&$(".SLS-share-panel").css("bottom","0px");$(".SLS-ask-panel-close").click(),$(".SLS-share-panel").show(),setTimeout((()=>{$(".SLS-share-panel").css("transform","translateY(0%)")}),10)}})),$(".SLS-share-panel-close").click((function(){$(".SLS-share-panel").css("transform","translateY(100%)"),setTimeout((()=>{$(".SLS-share-panel").hide()}),500)})),$(".SLS-offer").click((function(){if($(".SLS-offer-panel").is(":visible"))$(".SLS-offer-panel-close").click();else{if($(window).width()<768){let e=$(".messages-pin-mobile").height()+actionbar_size+recordingcontrol_size;$(".SLS-offer-panel").css("bottom",e),$(".SLS-products-panel-close").click(),$(".SLS-comments-panel-close").click(),$(".SLS-ask-panel-close").click(),$(".SLS-share-panel-close").click(),$(".SLS-offer-panel").show()}else $(".SLS-comments-panel").show(),setTimeout((()=>{$(".SLS-comments-panel").css("transform","translateY(0%)")}),10),$("#tabs-nav li").removeClass("active"),$('a[href="#Offers"]').parent().addClass("active"),$(".tab-content").hide(),$(".messages-pin").hide(),$(".SLS-panel-scroll-mcustom").hide(),$(".SLS-comment-post").hide(),$("#tabs-content #Offers").show();setTimeout((()=>{$(".SLS-offer-panel").css("transform","translateY(0%)")}),10)}})),$(".SLS-offer-panel-close").click((function(){$(".SLS-offer-panel").css("transform","translateY(100%)"),setTimeout((()=>{$(".SLS-offer-panel").hide()}),500)})),$(".SLS-show-products").click((function(){if($(".SLS-products-panel").is(":visible"))$(".SLS-products-panel-close").click();else{if($(window).width()<768){let e=$(".messages-pin-mobile").height()+actionbar_size+recordingcontrol_size;$(".SLS-products-panel").css("bottom",e),$(".SLS-comments-panel-close").click(),$(".SLS-share-panel-close").click(),$(".SLS-ask-panel-close").click(),$(".SLS-offer-panel-close").click()}$(".SLS-products-panel").show(),setTimeout((()=>{let e=$(window).width()>768?"translateX(0%)":"translateY(0%)";$(".SLS-products-panel").css("transform",e)}),10);let e=$(window).width()>768?"100%":"50%";$(".SLS-products-panel").css("height",e),$(".SLS-product-tile").css("border-bottom","1px solid #c7c7c7"),$(".SLS-added-products .SLS-product-tile").removeClass("hide")}})),$(".SLS-products-panel-close").click((function(){let e=$(window).width()>768?"translateX(100%)":"translateY(100%)";$(".SLS-products-panel").css("transform",e),setTimeout((()=>{$(".SLS-products-panel").hide()}),500)})),$(".showcase-products").click((function(){if($(".SLS-products-panel").is(":visible"))$(".SLS-products-panel-close").click();else{var e=$(this).attr("data-proid");if($(window).width()<768){let e=$(".messages-pin-mobile").height()+actionbar_size+recordingcontrol_size;$(".SLS-products-panel").css("bottom",e),$(".SLS-comments-panel-close").click(),$(".SLS-share-panel-close").click(),$(".SLS-ask-panel-close").click(),$(".SLS-offer-panel-close").click()}$(".SLS-products-panel").show(),setTimeout((()=>{let e=$(window).width()>768?"translateX(0%)":"translateY(0%)";$(".SLS-products-panel").css("transform",e)}),10),$(".SLS-products-panel").css("height","30%"),$(".SLS-product-tile").css("border-bottom","unset"),$(".SLS-added-products .SLS-product-tile").addClass("hide"),$("#pro-detail-"+e).removeClass("hide")}})),$(".SLS-show-comments").click((function(){if($(".SLS-comments-panel").is(":visible"))$(".SLS-comments-panel-close").click();else{if($(window).width()<768){let e=$(".messages-pin-mobile").height()+actionbar_size+recordingcontrol_size+showcase_bar;$(".SLS-comments-panel").css("bottom",e),$(".SLS-products-panel-close").click(),$(".SLS-share-panel-close").click(),$(".SLS-ask-panel-close").click(),$(".SLS-offer-panel-close").click()}$(".SLS-comments-panel").show(),setTimeout((()=>{let e=$(window).width()>768?"translateX(0%)":"translateY(0%)";$(".SLS-comments-panel").css("transform",e)}),10),updateScrollbar()}})),$(".SLS-comments-panel-close").click((function(){let e=$(window).width()>768?"translateX(-100%)":"translateY(100%)";$(".SLS-comments-panel").css("transform",e),setTimeout((()=>{$(".SLS-comments-panel").hide()}),500)}));var fbButton=document.getElementById("fb-share-button"),url=$("#copy-text").val();function copy_text(){var e=document.getElementById("copy-text");e.select(),e.setSelectionRange(0,99999),navigator.clipboard.writeText(e.value),$('[data-toggle="tooltip"]').tooltip(),$("#btn-copy").html("Copied")}function otpcheck(){var e=$("#stream_id").val(),t=document.getElementById("otp").value,a=document.getElementById("otp_confirm").value,s=$("#mobile").intlTelInput("getSelectedCountryData").dialCode;if(t!=a)return $(".err_user_cpassword").html("OTP should be same.").fadeIn().delay(3e3).fadeOut(),$("#otp").focus(),!1;{$("#demo-modal-1").modal("toggle");var o=document.getElementById("name").value,i=document.getElementById("mobile").value,l=(new Date).getTime();let t=generateString(20);db.collection("messages").doc(e).collection("users").doc(t).set({user_id:t,country_code:s,name:o,phone:i,created_date:l,stream_id:e}),$("#user_id").val(t),$("#user_fname").val(o),$("#user_phone").val(i);try{localStorage.setItem("user_id",t),localStorage.setItem("user_fname",o),localStorage.setItem("user_phone",i)}catch(e){}insertMessage(),$(".rsvp-button").hide()}}function otpcheck_without_sp(e){if(0==e){if(""==(a=document.getElementById("name").value))return $(".error_msg").html("This is a required field.").fadeIn().delay(3e3).fadeOut(),$("#name").focus(),!1;if(a.length<3)return $(".error_msg").html("Please enter 3 latter.").fadeIn().delay(3e3).fadeOut(),$("#name").focus(),!1;{if(0==onlyAlphabets(a))return $(".error_msg").html("Name should be alphabets only").fadeIn().delay(3e3).fadeOut(),$("#name").focus(),!1;$("#demo-modal-1").modal("toggle");var t=$("#stream_id").val(),a=document.getElementById("name").value,s=(new Date).getTime();let o=generateString(20);db.collection("messages").doc(t).collection("users").doc(o).set({user_id:o,name:a,created_date:s,stream_id:t}),$("#user_id").val(o),$("#user_fname").val(a);try{localStorage.setItem("user_id",o),localStorage.setItem("user_fname",a)}catch(e){}insertMessage()}}else{a=document.getElementById("name").value;var o=document.getElementById("mobile").value;if(""==a)return $(".error_msg").html("This is a required field.").fadeIn().delay(3e3).fadeOut(),$("#name").focus(),!1;if(a.length<3)return $(".error_msg").html("Please enter 3 latter.").fadeIn().delay(3e3).fadeOut(),$("#name").focus(),!1;if(""==o)return $(".error_msg").html("This is a required field.").fadeIn().delay(3e3).fadeOut(),$("#mobile").focus(),!1;if(o.length<10||o.length>10)return $(".error_msg").html("Please Enter 10 Digit Mobile No.").fadeIn().delay(3e3).fadeOut(),$("#mobile").focus(),!1;{if(0==onlyAlphabets(a))return $(".error_msg").html("Name should be alphabets only").fadeIn().delay(3e3).fadeOut(),$("#name").focus(),!1;var i=$("#mobile").intlTelInput("getSelectedCountryData").dialCode;$("#demo-modal-1").modal("toggle");a=document.getElementById("name").value;var l=document.getElementById("mobile").value;if(""==l)o="";else o=l;t=$("#stream_id").val(),s=(new Date).getTime();let n=generateString(20);i=null!=i?i:"",db.collection("messages").doc(t).collection("users").doc(n).set({user_id:n,country_code:i,name:a,phone:o,created_date:s,stream_id:t}),$("#user_id").val(n),$("#user_fname").val(a),$("#user_phone").val(o),$("#country_code").val(i);try{localStorage.setItem("user_id",n),localStorage.setItem("user_fname",a),localStorage.setItem("user_phone",o),localStorage.setItem("country_code",i)}catch(e){}insertMessage()}}}function onlyAlphabets(e){return!!/^[a-zA-Z ]*$/.test(e)}fbButton.addEventListener("click",(function(){return window.open("https://www.facebook.com/sharer/sharer.php?u="+url,"facebook-share-dialog","width=800,height=600"),!1})),$(".muteicon").click((function(){$(".tooltiptext").css("visibility","hidden"),$(this).find("svg").toggle();var e=document.getElementById("livestreambro_html5_api");e.muted?e.muted=!1:e.muted=!0})),$(document).ready((function(){$(".mobile-input").val("+91"),$(".mobile-input").intlTelInput({autoHideDialCode:!0,autoPlaceholder:"ON",dropdownContainer:document.body,formatOnDisplay:!0,hiddenInput:"full_number",initialCountry:"auto",nationalMode:!0,placeholderNumberType:"MOBILE",preferredCountries:["in"],separateDialCode:!0}),$(".message-submit").click((function(){""!=$("#user_id").val()?($("#demo-modal-1").modal("hide"),insertMessage()):($("#demo-modal-1").modal("show"),$(".close1").css("display","none"))})),$(".rsvp-button").click((function(){""!=$("#user_id").val()?$("#demo-modal-1").modal("hide"):($("#demo-modal-1").modal("show"),$(".close1").css("display","none"))})),"0000-00-00 00:00:00"!=$("#end_time").val()&&(localStorage.removeItem("user_id"),localStorage.removeItem("user_fname"),localStorage.removeItem("user_phone"),localStorage.removeItem("user_email"));try{null!=localStorage.getItem("user_id")&&(res=localStorage.getItem("user_id"),$("#user_id").val(res)),null!=localStorage.getItem("user_fname")&&(res1=localStorage.getItem("user_fname"),$("#user_fname").val(res1)),null!=localStorage.getItem("user_phone")&&(res2=localStorage.getItem("user_phone"),$("#user_phone").val(res2)),null!=localStorage.getItem("user_email")&&(res3=localStorage.getItem("user_email"),$("#user_email_local").val(res3)),null!=localStorage.getItem("country_code")&&(res4=localStorage.getItem("country_code"),$("#country_code").val(res4))}catch(e){}""!=$("#user_id").val()?$(".rsvp-button").hide():$(".rsvp-button").show()})),sendEvent=function(e,t){var a=$("#base_url").val(),s=document.getElementById("name").value,o=document.getElementById("mobile").value,i=$("#mobile").intlTelInput("getSelectedCountryData").dialCode;if(""==s)return $(".err_user_cpassword").html("This is a required field.").fadeIn().delay(3e3).fadeOut(),$("#name").focus(),!1;if(s.length<3)return $(".err_user_cpassword").html("Please enter 3 latter.").fadeIn().delay(3e3).fadeOut(),$("#name").focus(),!1;if(""==o)return $(".err_user_cpassword").html("This is a required field.").fadeIn().delay(3e3).fadeOut(),$("#mobile").focus(),!1;if(o.length<10||o.length>10)return $(".err_user_cpassword").html("Please Enter 10 Digit Mobile No.").fadeIn().delay(3e3).fadeOut(),$("#mobile").focus(),!1;if(0==onlyAlphabets(s))return $(".err_user_cpassword").html("Name should be alphabets only").fadeIn().delay(3e3).fadeOut(),$("#name").focus(),!1;$(".close1").css("display","block");o=$("#mobile").val();var l=Math.floor(1e3+9e3*Math.random());$("#otp_confirm").val(l),$.ajax({type:"POST",dataType:"json",url:a+"index.php/Live/send_otp",data:"mobile="+encodeURIComponent(o)+"&otp="+encodeURIComponent(l)+"&code="+encodeURIComponent(i),success:function(e){}}),$(e).trigger("next.m."+t)};const characters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function generateString(e){let t="";const a=characters.length;for(let s=0;s<e;s++)t+=characters.charAt(Math.floor(Math.random()*a));return t}function insertMessage(){if($(window).width()>768){if(""==$(".message-input").val())return $(".message-input").focus(),!1}else if(""==$(".message-input-mobile").val())return $(".message-input-mobile").focus(),!1;sendMessage()}$(window).on("keydown",(function(e){if(13==e.which)return""!=$("#user_id").val()?($("#demo-modal-1").modal("hide"),insertMessage()):($("#demo-modal-1").modal("show"),$(".close1").css("display","none")),!1})),firebase.initializeApp({apiKey:"AIzaSyCWTGwzrHuwJY2yrmDcMm3Sm8Qfq1BtOw0",authDomain:"getnatty-1547727043139.firebaseapp.com",projectId:"getnatty-1547727043139",storageBucket:"getnatty-1547727043139.appspot.com"});var db=firebase.firestore(),streamId=$("#stream_id").val(),is_defer=$("#is_defer").val(),autoverify_popup=$("#autoverify_popup").val();function sendMessage(e){var t=$("#user_id").val(),a=$("#user_fname").val(),s=$("#user_phone").val(),o=(new Date).getTime();if($(window).width()>768)var i=document.getElementById("SLS-comment").value;else i=document.getElementById("SLS-comment-mobile").value;db.collection("messages").doc(streamId).collection("messages").get().then((e=>{size=e.size})),db.collection("messages").doc(streamId).collection("messages").add({cover_img:"",created_time:o,from:t,is_designer:!1,is_designer_seen:!1,message:i,name:a,profile:"",title:"",type:"text",user_percentage:"20",user_phone:s,flag:"0"}),$(".message-input").val(null),$(".message-input-mobile").val(null),$(".collapsable").css("display","none"),$(window).width()<768&&$(".action-bar").css("display","table-cell"),$(".message-textbox-div").css("width","50%"),$(".message-textbox-div").css("padding-right","0px")}db.collection("live_streams").doc(streamId).onSnapshot({includeMetadataChanges:!0},(e=>{if(1==e.exists){var t="";""==e.data().is_recorded&&"undefined"==e.data().is_recorded||(t=e.data().is_recorded),1==t?($("#livestatus").text("RECORDED"),$("#livestatus").addClass("recordingflag")):($("#livestatus").text("LIVE"),$("#livestatus").addClass("liveflag"),1==autoverify_popup&&$(".rsvp-button").click())}else 2==is_defer&&($("#livestatus").text("UPCOMING"),$("#livestatus").addClass("upcoming-flag"),$("#viewcount").hide())}));var $messages=$(".SLS-panel-scroll-mcustom"),comments_limit=(streamId=$("#stream_id").val(),$("#comments_limit").val());$messages.mCustomScrollbar(),db.collection("messages").doc(streamId).collection("messages").orderBy("created_time","desc").limit(comments_limit).onSnapshot((e=>{size=e.size,e.docChanges().forEach((e=>{if(size>0?$("#comments-dot").show():$("#comments-dot").hide(),$(".no-cmmt-msg").hide(),"1"===e.doc.data().flag)if("removed"===e.type)$(".messages-pin").empty(),$("#message-"+e.doc.id).remove();else{var t=$("#designer_id").val(),a=convertMsToTime(e.doc.data().created_time);if(e.doc.data().from==t)var s="fillcolor",o="brand-time",i=' <img style="width: 30px;border-radius: 50%;" src="'+$("#brand_logo").val()+'" alt="Brand logo" title="'+e.doc.data().name+'" />';else s="",o="",o="",i='<i class="fas fa-user-circle" style="font-size:30px"></i>';if(1==isValidUrl(e.doc.data().message)){var l=urlify(e.doc.data().message);$('<div id="message-'+e.doc.id+'"><div class="'+s+' msgcontent-div" style="margin: 5px 0px;width: 100%;"><div class="icon" style="display: table-cell;padding-top: 5px;">'+i+'</div><div class="msg-content" style="width: 100%;display: table-cell;vertical-align: top;"><p style="font-weight: bold; margin-bottom: 0px;font-size: 15px;">'+e.doc.data().name+'<span class="time '+o+'">'+a+"</span></p><p>"+l+"</p></div></div></div>").appendTo($(".SLS-comments-all")).addClass("new")}else $('<div id="message-'+e.doc.id+'"><div class="'+s+' msgcontent-div" style="margin: 5px 0px;width: 100%;"><div class="icon" style="display: table-cell;padding-top: 5px;">'+i+'</div><div class="msg-content" style="width: 100%;display: table-cell;vertical-align: top;"><p style="font-weight: bold; margin-bottom: 0px;font-size: 15px;">'+e.doc.data().name+'<span class="time '+o+'">'+a+"</span></p><p>"+e.doc.data().message+"</p></div></div></div>").appendTo($(".SLS-comments-all")).addClass("new")}setTimeout((function(){db.collection("messages").doc(streamId).collection("messages").doc(e.doc.id).update({flag:"1"})}),5e3)})),updateScrollbar()}));const isValidUrl=e=>null!==e.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g);function convertMsToTime(e){var t=new Date(e);timezone=t.toString();var a=new Date(timezone);return localtime=a.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}),localtime}if($(window).width()<768){let e=$(".messages-pin-mobile").height()+actionbar_size+recordingcontrol_size+5;$("#bottom-showcase-products").css("bottom",e);let t=e+35;$(".swiper-button-next").css("bottom",t),$(".swiper-button-prev").css("bottom",t)}function updateScrollbar(){var e=$(".SLS-panel-scroll-mcustom");e.mCustomScrollbar(),e.mCustomScrollbar("update").mCustomScrollbar("scrollTo","bottom",{scrollInertia:10,timeout:0})}function buynow_firbase(e){var t=$(e).attr("data-proid"),a=$(e).attr("data-desid"),s=$(e).attr("data-protitle"),o=$(e).attr("data-proimg"),i=$(e).attr("data-redirection"),l=$("#user_id").val(),n=$("#user_fname").val(),r=$("#user_phone").val(),d=$("#country_code").val(),c=(new Date).getTime();let m=generateString(20);db.collection("messages").doc(streamId).collection("buy_now").doc(m).set({user_id:l,country_code:d,name:n,phone:r,created_date:c,stream_id:streamId,product_id:t,product_title:s,product_image:o,product_url:i,designer_id:a});var u=navigator.userAgent||navigator.vendor||window.opera;/iPad|iPhone|iPod/.test(u)&&!window.MSStream?$(".SLS-product-buynow-btn").click((function(){var e=window.open(i,"_blank");$.ajax({type:"POST",url:"/echo/json/",success:function(t){e.location}})})):window.open(i,"_blank")}var end_time=$("#end_time").val();is_defer=$("#is_defer").val();function autoswiper(){new Swiper(".mySwiper",{slidesPerView:4,direction:"horizontal",spaceBetween:3,centeredSlidesBounds:!0,centerInsufficientSlides:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})}function pinheightweb(){var e=$(".messages-pin").height();e="calc(100% - "+(e+=80)+"px)",$(".SLS-panel-scroll-mcustom").css("height",e)}function reloadOnceLive(){db.collection("live_streams").doc(streamId).onSnapshot((e=>{var t="idle";2==$("#is_defer").val()?($("#black-screen").hide(),$("#remote-media").show(),$(".muteicon").show(),$(".share-div").show(),$(".live-status").show(),$(".SL-schedule-timer").show()):($("#remote-media").hide(),$("#black-screen").show(),$(".live-status").hide()),$(".product-img-list").hide();var a=streamId;if(e.exists){let e=setInterval((function(){"idle"==t&&$.ajax({url:"https://store.goswirl.live/index.php/api/Mogicon/muxLiveStreamStatus",method:"POST",dataType:"JSON",data:{stream_id:a},success:function(a){"active"==a.status&&(t="active",clearInterval(e),window.location=window.location.href+"?live=true")}})}),3e3)}}))}function urlify(e){if(-1!==e.indexOf("https")){return e.replace(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g,(function(e){return/^((http|https|ftp):\/\/)/.test(e)||(e="https://"+e),'<a style="word-break:break-all" href="'+e+'" target="_blank">'+e+"</a>"}))}return e}function nFormatter(e){return e>=1e9?(e/1e9).toFixed(1).replace(/\.0$/,"")+"G":e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e5?(e/1e5).toFixed(1).replace(/\.0$/,"")+"L":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e}function ask_que_submit(e,t){var a=$("#base_url").val(),s=$("#user_id").val(),o=$("#user_fname").val(),i=$("#user_phone").val(),l=document.getElementById("inquiry_text_ask").value;if(""==l)return $(".err_ask").html("This is a required field.").fadeIn().delay(3e3).fadeOut(),$("#inquiry_text_ask").focus(),!1;""==s?($("#ask_que").modal("hide"),$("#inquiry_text_ask").val(l),$("#demo-modal-1").modal("show")):$.ajax({type:"POST",dataType:"json",url:a+"index.php/Live/ask_que_details",data:"user_id="+encodeURIComponent(s)+"&user_fname="+encodeURIComponent(o)+"&user_phone="+encodeURIComponent(i)+"&designer_id="+encodeURIComponent(e)+"&msg="+encodeURIComponent(l)+"&live_id="+encodeURIComponent(t)+"&swirls_id="+encodeURIComponent(""),success:function(e){$("#ask_que").modal("hide"),$("#inquiry_text_ask").val(""),alert(e.message),ask_que_count()}})}function ask_que_count(){db.collection("live_streams").doc(streamId).get().then((e=>{var t=e.data().ask_que_count;t++,db.collection("live_streams").doc(streamId).update({ask_que_count:t})}))}function rsvp_submit(){var e=$("#stream_id").val();let t=generateString(20);var a=document.getElementById("rsvp-name").value,s=document.getElementById("rsvp-email").value,o=document.getElementById("rsvp-phone").value,i=document.forms["rsvp-form"].agree,l=(new Date).getTime();if(""==a)return $(".form-validation-error").html("This is a required fields.").fadeIn().delay(3e3).fadeOut(),$("#rsvp-name").focus(),!1;if(a.length<3)return $(".form-validation-error").html("Please enter 3 latter.").fadeIn().delay(3e3).fadeOut(),$("#rsvp-name").focus(),!1;if(""==s)return $(".form-validation-error").html("This is a required fields.").fadeIn().delay(3e3).fadeOut(),$("#rsvp-email").focus(),!1;if(""==o)return $(".form-validation-error").html("This is a required fields.").fadeIn().delay(3e3).fadeOut(),$("#rsvp-phone").focus(),!1;if(!i.checked)return $(".error_msg_rsvp").html("You must agree with the terms and conditions").fadeIn().delay(3e3).fadeOut(),$("#checkbox").focus(),!1;$("#user_id").val(t),$("#user_fname").val(a),$("#user_phone").val(o);try{localStorage.setItem("user_id",t),localStorage.setItem("user_fname",a),localStorage.setItem("user_email",s),localStorage.setItem("user_phone",o),localStorage.setItem("is_rsvp",1)}catch(e){}db.collection("messages").doc(e).collection("users").doc(t).set({user_id:t,name:a,email:s,phone:o,created_date:l,stream_id:e,is_rsvp:1}),alert("RSVP form submitted successfully"),$("#exampleModal").modal("hide"),$(".modal-backdrop").remove(),$(".rsvp-button").hide()}if(db.collection("live_streams").doc(streamId).onSnapshot((e=>{e.exists?($(".flag").show(),$("#remote-media").show(),$(".product-img-list").show(),$(".SLS-control-panel").show(),$("#black-screen").hide(),1==e.data().is_paused&&($("#remote-media").hide(),$(".product-img-list").hide(),$(".SLS-control-panel").hide(),$("#black-screen").show(),$("#stream_span").html("paused & will resume shortly"))):"0000-00-00 00:00:00"==end_time?($(".mySwiper").hide(),2!=is_defer&&$(".flag").hide(),$("#remote-media").hide(),$("#black-screen").show(),$(".product-img-list").hide(),$(".muteicon").hide(),$(".share-div").hide(),2==is_defer?$(".offer-icon").show():$(".offer-icon").hide(),$(window).width()<768?($(".SLS-control-panel").show(),$(".SLS-show-comments").click()):$(".SLS-control-panel").hide(),$(window).width()>768&&($(".SLS-products-panel-close .fas").hide(),$(".SLS-comments-panel-close .fas").hide()),$("#SLS-comment-mobile").prop("disabled",!0),$(".last-comments").hide()):($("#remote-media").show(),$("#black-screen").hide())})),db.collection("live_streams").doc(streamId).onSnapshot((e=>{if(e.exists){var t=e.data().pin_comment_id;if(""!=t&&null!=t){db.collection("messages").doc(streamId).collection("messages").doc(t).get().then((e=>{if(e.exists){$(".messages-pin").empty(),$(".messages-pin-mobile").empty();var t=' <img style="width: 30px;border-radius: 50%;" src="'+$("#brand_logo").val()+'" alt="Brand logo" title="'+e.data().name+'" />';if(1==isValidUrl(e.data().message)){var a=urlify(e.data().message);$('<div id="message-'+e.id+'"><div class="pin-main-div"><div class="icon pin-user-pic">'+t+'</div><div class="msg-content pin-msg-content"><p>'+e.data().name+"</p><p>"+a+'</p></div><div class="pin-main-icon"><span class="pinicon"><i class="icon-pushpin"></i></span></div></div>').appendTo($(".messages-pin")).addClass("new"),$('<div id="message-'+e.id+'"><p><i class="icon-pushpin"></i><span>'+e.data().name+" </span>: "+a+"</p></div>").appendTo($(".messages-pin-mobile")).addClass("new")}else $('<div id="message-'+e.id+'"><div class="pin-main-div"><div class="icon pin-user-pic">'+t+'</div><div class="msg-content pin-msg-content"><p>'+e.data().name+"</p><p>"+e.data().message+'</p></div><div class="pin-main-icon"><span class="pinicon"><i class="icon-pushpin"></i></span></div></div>').appendTo($(".messages-pin")).addClass("new"),$('<div id="message-'+e.id+'"><p><i class="icon-pushpin"></i><span>'+e.data().name+" </span>: "+e.data().message+"</p></div>").appendTo($(".messages-pin-mobile")).addClass("new")}else $(".messages-pin").empty(),$(".messages-pin-mobile").empty();let s=$(".messages-pin-mobile").height()+actionbar_size+recordingcontrol_size+5;$("#bottom-showcase-products").css("bottom",s);let o=s+35;$(".swiper-button-next").css("bottom",o),$(".swiper-button-prev").css("bottom",o);let i=$(".messages-pin-mobile").height()+actionbar_size+recordingcontrol_size+showcase_bar;$(".SLS-comments-panel").css("bottom",i),$(window).width()>768&&pinheightweb()}))}else{$(".messages-pin").empty(),$(".messages-pin-mobile").empty();let e=$(".messages-pin-mobile").height()+actionbar_size+recordingcontrol_size+5;$("#bottom-showcase-products").css("bottom",e);let t=e+35;$(".swiper-button-next").css("bottom",t),$(".swiper-button-prev").css("bottom",t);let a=$(".messages-pin-mobile").height()+actionbar_size+recordingcontrol_size+showcase_bar;$(".SLS-comments-panel").css("bottom",a)}if($(window).width()>768&&pinheightweb(),1==e.data().is_live){var a=$("#base_url").val(),s=$("#product_ids").val(),o=$("#designer_id").val(),i=$("#star_products").val();setInterval((function(){$.ajax({type:"POST",dataType:"json",url:a+"index.php/Live/otmanyproductlist",data:"stream_id="+encodeURIComponent(streamId)+"&productIds="+encodeURIComponent(s)+"&star_products="+encodeURIComponent(i),beforeSend:function(){},success:function(e){if("1"==e.status_code){if($("#product_count").text(e.data.product_count),$(".SLS-added-products-static").hide(),$(".SLS-added-products-dynamic").empty(),$("#bottom-showcase-products").empty(),$("#static-img").hide(),$("#dynamic-img").empty(),"0"!=e.data.product_count){if("0"==e.data.is_product_price)var t="mb-2",a="d-none";else t="",a="d-block";for(var l=0;l<e.data.product.length;l++){var n=e.data.product[l].link,r="";if(1==e.data.product[l].is_star)var d="starproduct",c="inline";else d="",c="d-none";if(e.data.product[l].product_sell_price!=e.data.product[l].product_price)r='<s class="pl-2 cl-red">'+e.data.currencysymbols+" "+e.data.product[l].product_price+"</s> ";$(".SLS-added-products-dynamic").append('<div class="d-flex align-items-start SLS-product-tile '+d+'" id="pro-detail-pro-'+e.data.product[l].product_id+'"><div class="SLS-product-image"><img src="'+e.data.product[l].product_img_url+'" alt="Product Image" title="Product Image"></div><div class="SLS-product-content"><p class="m-0 '+t+'" title="'+e.data.product[l].product_title+'">'+e.data.product[l].product_title+'</p><label class="m-0 mb-2 '+a+'">'+e.data.currencysymbols+" "+e.data.product[l].product_sell_price+"<del>"+r+'</del></label><button type="button" class="SLS-product-buynow-btn" onclick="buynow_firbase(this)" data-protitle="'+e.data.product[l].product_title+'" data-proimg="'+e.data.product[l].product_img_url+'" data-proid="'+e.data.product[l].product_id+'" data-redirection="'+n+'" data-desid="'+o+'">'+e.data.btn2_title+'</button></div><div class="'+c+'"><img class="star-animation-listing" src="https://cdn.jsdelivr.net/gh/SwirlAdmin/swirl-cdn/assets/images/star-animation.gif" class="setproduct"></div></div>'),$("#bottom-showcase-products").append('<div class="swiper-slide '+d+'"><a href="'+n+'" class="text-decoration-none" target="_blank"><div class="rounded"><img class="star-animation '+c+'" src="https://cdn.jsdelivr.net/gh/SwirlAdmin/swirl-cdn/assets/images/star-animation.gif" class="setproduct"><img class="rounded mb-2" src="'+e.data.product[l].product_img_url+'"> <p class="mb-0 text-dark text-decoration-none '+a+'">'+e.data.currencysymbols+" "+e.data.product[l].product_sell_price+"</p></div></a></div>")}}else showcase_bar=0;autoswiper(),s=e.data.product_ids,i=e.data.star_products}}})}),6e4)}}})),$(document).ready((function(){db.collection("live_streams").doc(streamId).onSnapshot((e=>{e.exists||reloadOnceLive()}))})),db.collection("live_streams").doc(streamId).onSnapshot((e=>{e.exists?db.collection("live_streams").doc(streamId).onSnapshot({includeMetadataChanges:!0},(e=>{1==e.data().comments_status?($(".SLS-comment-form").show(),$(".message-textbox-div").show()):($(".SLS-comment-form").hide(),$(".message-textbox-div").css("display","none !important")),1==e.data().fire_status?$("#gif").show():$("#gif").hide();var t=e.data().ivs_viewer_count;null!=t||null!=t?(result=nFormatter(t),$("#view-count").text(result)):$("#view-count").text(0)})):($(".SLS-comment-form").hide(),$(".message-textbox-div").css("display","none !important"),$("#gif").hide())})),$("#tabs-nav li:first-child").addClass("active"),$(".tab-content").hide(),$(".tab-content:first").show(),$("#tabs-nav li").click((function(){$("#tabs-nav li").removeClass("active"),$(this).addClass("active"),$(".tab-content").hide(),$(".messages-pin").toggle(),$(".SLS-panel-scroll-mcustom").toggle(),$(".SLS-comment-post").toggle();$(this).find("a").attr("href");return"live-chat-tabs"==$(this).find("a").attr("id")?($("#Offers").hide(),$(".messages-pin").show(),$(".SLS-panel-scroll-mcustom").show(),$(".SLS-comment-post").show()):($(".SLS-panel-scroll-mcustom").hide(),$(".messages-pin").hide(),$(".SLS-comment-post").hide(),$("#Offers").show()),!1})),2==(is_defer=$("#is_defer").val())){var id="undefined",starting_time=$("#starting_time").val(),countDownDate=[],x=[],now=[],distance=[],days=[],hours=[],minutes=[],seconds=[];countDownDate[id]=new Date(starting_time.replaceAll("-","/")).getTime(),x[id]=setInterval((function(){now[id]=(new Date).getTime(),distance[id]=countDownDate[id]-now[id],days[id]=Math.floor(distance[id]/864e5),hours[id]=Math.floor(distance[id]%864e5/36e5),minutes[id]=Math.floor(distance[id]%36e5/6e4),seconds[id]=Math.floor(distance[id]%6e4/1e3),document.getElementById(`${id}day`).innerHTML=String(days[id]).padStart(2,"0"),document.getElementById(`${id}hour`).innerHTML=String(hours[id]).padStart(2,"0"),document.getElementById(`${id}min`).innerHTML=String(minutes[id]).padStart(2,"0"),document.getElementById(`${id}sec`).innerHTML=String(seconds[id]).padStart(2,"0"),distance[id]<0&&(clearInterval(x[id]),$(".SL-schedule-timer").hide(),document.getElementById(`${id}day`).innerHTML="00",document.getElementById(`${id}hour`).innerHTML="00",document.getElementById(`${id}min`).innerHTML="00",document.getElementById(`${id}sec`).innerHTML="00")}),1e3)}db.collection("live_streams").doc(streamId).onSnapshot({includeMetadataChanges:!0},(e=>{1==e.exists&&(null!=e.data().click_heart_like&&(SWIRLHeartFlaws(),SWIRLHeartFlaws(),SWIRLHeartFlaws()))}));
//# sourceMappingURL=/sm/530ad2a453cea1543377b05d0ac1d0f790d901f2c82b5cc0be8f40cacad69234.map